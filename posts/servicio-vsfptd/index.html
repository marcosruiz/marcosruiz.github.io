<!DOCTYPE html><html lang="es" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Servicio VSFTPD" /><meta property="og:locale" content="es" /><meta name="description" content="Introducción" /><meta property="og:description" content="Introducción" /><link rel="canonical" href="https://marcosruiz.github.io/posts/servicio-vsfptd/" /><meta property="og:url" content="https://marcosruiz.github.io/posts/servicio-vsfptd/" /><meta property="og:site_name" content="Marcos Ruiz" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-17T09:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Servicio VSFTPD" /><meta name="twitter:site" content="@whataweekhuh" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-01-20T01:59:22+01:00","datePublished":"2022-01-17T09:00:00+01:00","description":"Introducción","headline":"Servicio VSFTPD","mainEntityOfPage":{"@type":"WebPage","@id":"https://marcosruiz.github.io/posts/servicio-vsfptd/"},"url":"https://marcosruiz.github.io/posts/servicio-vsfptd/"}</script><title>Servicio VSFTPD | Marcos Ruiz</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Marcos Ruiz"><meta name="application-name" content="Marcos Ruiz"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://avatars.githubusercontent.com/u/7647613?v=4 " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Marcos Ruiz</a></div><div class="site-subtitle font-italic">Trabaja duro para ser vago</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>INICIO</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORÍAS</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>ETIQUETAS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVOS</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>SOBRE MÍ</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/marcosruiz" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['profesor.mruizg','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Inicio </a> </span> <span>Servicio VSFTPD</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Artículo</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Buscar..."> </span> <span id="search-cancel" >Cancelar</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Servicio VSFTPD</h1><div class="post-meta text-muted"><div> <em> <a href="https://github.com/marcosruiz">Marcos Ruiz</a> </em></div><div class="d-flex"><div> <span> <em class="timeago" data-ts="1642406400" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-01-17 </em> </span> <span> Actualizado <em class="timeago" data-ts="1642640362" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-01-20 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1592 palabras"> <em>8 minutos</em> lectura</span></div></div></div><div class="post-content"><h2 id="introducción"><span class="mr-2">Introducción</span><a href="#introducción" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Vsftpd (Very Secure FTP Daemon) o demonio FTP muy seguro es un servidor FTP liviano, potente y altamente configurable. Se encuentra en los repositorios de todas las distribuciones Linux.</p><p>El uso más extendido de FTP es para acceder al servidor web para modificar, subir, eliminar o modificar permisos de archivos o directorios.</p><p>En este artículo vamos a ver cómo instalarlo y configurarlo con una instalación previa de apache.</p><h2 id="instalación-de-vsftpd"><span class="mr-2">Instalación de VSFTPD</span><a href="#instalación-de-vsftpd" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Para instalar el servicio escribimos lo siguiente:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">#</span><span class="w"> </span>apt <span class="nb">install</span> <span class="nt">-y</span> vsftpd
</pre></table></code></div></div><h2 id="arranque-parada-y-estado-de-vsftpd"><span class="mr-2">Arranque, parada y estado de VSFTPD</span><a href="#arranque-parada-y-estado-de-vsftpd" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Para arrancar el servicio VSFTPD escribimos lo siguiente:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">#</span><span class="w"> </span>service vsftpd start
</pre></table></code></div></div><p>Para parar el servicio VSFTPD escribimos lo siguiente:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">#</span><span class="w"> </span>service vsftpd stop
</pre></table></code></div></div><p>Para saber el estado del servicio VSTPD escribimos lo siguiente:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">#</span><span class="w"> </span>service vsftpd status
</pre></table></code></div></div><h2 id="fichero-de-configuración-etcvsftpdconf"><span class="mr-2">Fichero de configuración /etc/vsftpd.conf</span><a href="#fichero-de-configuración-etcvsftpdconf" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Fichero de configuración general:</p><div file="/etc/vsftpd.conf" class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="/etc/vsftpd.conf"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
</pre><td class="rouge-code"><pre><span class="c"># Example config file /etc/vsftpd.conf</span>
<span class="c">#</span>
<span class="c"># The default compiled in settings are fairly paranoid. This sample file</span>
<span class="c"># loosens things up a bit, to make the ftp daemon more usable.</span>
<span class="c"># Please see vsftpd.conf.5 for all compiled in defaults.</span>
<span class="c">#</span>
<span class="c"># READ THIS: This example file is NOT an exhaustive list of vsftpd options.</span>
<span class="c"># Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd's</span>
<span class="c"># capabilities.</span>
<span class="c">#</span>
<span class="c">#</span>
<span class="c"># Run standalone?  vsftpd can run either from an inetd or as a standalone</span>
<span class="c"># daemon started from an initscript.</span>
<span class="nv">listen</span><span class="o">=</span>NO
<span class="c">#</span>
<span class="c"># This directive enables listening on IPv6 sockets. By default, listening</span>
<span class="c"># on the IPv6 "any" address (::) will accept connections from both IPv6</span>
<span class="c"># and IPv4 clients. It is not necessary to listen on *both* IPv4 and IPv6</span>
<span class="c"># sockets. If you want that (perhaps because you want to listen on specific</span>
<span class="c"># addresses) then you must run two copies of vsftpd with two configuration</span>
<span class="c"># files.</span>
<span class="nv">listen_ipv6</span><span class="o">=</span>YES
<span class="c">#</span>
<span class="c"># Allow anonymous FTP? (Disabled by default).</span>
<span class="nv">anonymous_enable</span><span class="o">=</span>NO
<span class="c">#</span>
<span class="c"># Uncomment this to allow local users to log in.</span>
<span class="nv">local_enable</span><span class="o">=</span>YES
<span class="c">#</span>
<span class="c"># Uncomment this to enable any form of FTP write command.</span>
<span class="c">#write_enable=YES</span>
<span class="c">#</span>
<span class="c"># Default umask for local users is 077. You may wish to change this to 022,</span>
<span class="c"># if your users expect that (022 is used by most other ftpd's)</span>
<span class="c">#local_umask=022</span>
<span class="c">#</span>
<span class="c"># Uncomment this to allow the anonymous FTP user to upload files. This only</span>
<span class="c"># has an effect if the above global write enable is activated. Also, you will</span>
<span class="c"># obviously need to create a directory writable by the FTP user.</span>
<span class="c">#anon_upload_enable=YES</span>
<span class="c">#</span>
<span class="c"># Uncomment this if you want the anonymous FTP user to be able to create</span>
<span class="c"># new directories.</span>
<span class="c">#anon_mkdir_write_enable=YES</span>
<span class="c">#</span>
<span class="c"># Activate directory messages - messages given to remote users when they</span>
<span class="c"># go into a certain directory.</span>
<span class="nv">dirmessage_enable</span><span class="o">=</span>YES
<span class="c">#</span>
<span class="c"># If enabled, vsftpd will display directory listings with the time</span>
<span class="c"># in  your  local  time  zone.  The default is to display GMT. The</span>
<span class="c"># times returned by the MDTM FTP command are also affected by this</span>
<span class="c"># option.</span>
<span class="nv">use_localtime</span><span class="o">=</span>YES
<span class="c">#</span>
<span class="c"># Activate logging of uploads/downloads.</span>
<span class="nv">xferlog_enable</span><span class="o">=</span>YES
<span class="c">#</span>
<span class="c"># Make sure PORT transfer connections originate from port 20 (ftp-data).</span>
<span class="nv">connect_from_port_20</span><span class="o">=</span>YES
<span class="c">#</span>
<span class="c"># If you want, you can arrange for uploaded anonymous files to be owned by</span>
<span class="c"># a different user. Note! Using "root" for uploaded files is not</span>
<span class="c"># recommended!</span>
<span class="c">#chown_uploads=YES</span>
<span class="c">#chown_username=whoever</span>
<span class="c">#</span>
<span class="c"># You may override where the log file goes if you like. The default is shown</span>
<span class="c"># below.</span>
<span class="c">#xferlog_file=/var/log/vsftpd.log</span>
<span class="c">#</span>
<span class="c"># If you want, you can have your log file in standard ftpd xferlog format.</span>
<span class="c"># Note that the default log file location is /var/log/xferlog in this case.</span>
<span class="c">#xferlog_std_format=YES</span>
<span class="c">#</span>
<span class="c"># You may change the default value for timing out an idle session.</span>
<span class="c">#idle_session_timeout=600</span>
<span class="c">#</span>
<span class="c"># You may change the default value for timing out a data connection.</span>
<span class="c">#data_connection_timeout=120</span>
<span class="c">#</span>
<span class="c"># It is recommended that you define on your system a unique user which the</span>
<span class="c"># ftp server can use as a totally isolated and unprivileged user.</span>
<span class="c">#nopriv_user=ftpsecure</span>
<span class="c">#</span>
<span class="c"># Enable this and the server will recognise asynchronous ABOR requests. Not</span>
<span class="c"># recommended for security (the code is non-trivial). Not enabling it,</span>
<span class="c"># however, may confuse older FTP clients.</span>
<span class="c">#async_abor_enable=YES</span>
<span class="c">#</span>
<span class="c"># By default the server will pretend to allow ASCII mode but in fact ignore</span>
<span class="c"># the request. Turn on the below options to have the server actually do ASCII</span>
<span class="c"># mangling on files when in ASCII mode.</span>
<span class="c"># Beware that on some FTP servers, ASCII support allows a denial of service</span>
<span class="c"># attack (DoS) via the command "SIZE /big/file" in ASCII mode. vsftpd</span>
<span class="c"># predicted this attack and has always been safe, reporting the size of the</span>
<span class="c"># raw file.</span>
<span class="c"># ASCII mangling is a horrible feature of the protocol.</span>
<span class="c">#ascii_upload_enable=YES</span>
<span class="c">#ascii_download_enable=YES</span>
<span class="c">#</span>
<span class="c"># You may fully customise the login banner string:</span>
<span class="c">#ftpd_banner=Welcome to blah FTP service.</span>
<span class="c">#</span>
<span class="c"># You may specify a file of disallowed anonymous e-mail addresses. Apparently</span>
<span class="c"># useful for combatting certain DoS attacks.</span>
<span class="c">#deny_email_enable=YES</span>
<span class="c"># (default follows)</span>
<span class="c">#banned_email_file=/etc/vsftpd.banned_emails</span>
<span class="c">#</span>
<span class="c"># You may restrict local users to their home directories.  See the FAQ for</span>
<span class="c"># the possible risks in this before using chroot_local_user or</span>
<span class="c"># chroot_list_enable below.</span>
<span class="c">#chroot_local_user=YES</span>
<span class="c">#</span>
<span class="c"># You may specify an explicit list of local users to chroot() to their home</span>
<span class="c"># directory. If chroot_local_user is YES, then this list becomes a list of</span>
<span class="c"># users to NOT chroot().</span>
<span class="c"># (Warning! chroot'ing can be very dangerous. If using chroot, make sure that</span>
<span class="c"># the user does not have write access to the top level directory within the</span>
<span class="c"># chroot)</span>
<span class="c">#chroot_local_user=YES</span>
<span class="c">#chroot_list_enable=YES</span>
<span class="c"># (default follows)</span>
<span class="c">#chroot_list_file=/etc/vsftpd.chroot_list</span>
<span class="c">#</span>
<span class="c"># You may activate the "-R" option to the builtin ls. This is disabled by</span>
<span class="c"># default to avoid remote users being able to cause excessive I/O on large</span>
<span class="c"># sites. However, some broken FTP clients such as "ncftp" and "mirror" assume</span>
<span class="c"># the presence of the "-R" option, so there is a strong case for enabling it.</span>
<span class="c">#ls_recurse_enable=YES</span>
<span class="c">#</span>
<span class="c"># Customization</span>
<span class="c">#</span>
<span class="c"># Some of vsftpd's settings don't fit the filesystem layout by</span>
<span class="c"># default.</span>
<span class="c">#</span>
<span class="c"># This option should be the name of a directory which is empty.  Also, the</span>
<span class="c"># directory should not be writable by the ftp user. This directory is used</span>
<span class="c"># as a secure chroot() jail at times vsftpd does not require filesystem</span>
<span class="c"># access.</span>
<span class="nv">secure_chroot_dir</span><span class="o">=</span>/var/run/vsftpd/empty
<span class="c">#</span>
<span class="c"># This string is the name of the PAM service vsftpd will use.</span>
<span class="nv">pam_service_name</span><span class="o">=</span>vsftpd
<span class="c">#</span>
<span class="c"># This option specifies the location of the RSA certificate to use for SSL</span>
<span class="c"># encrypted connections.</span>
<span class="nv">rsa_cert_file</span><span class="o">=</span>/etc/ssl/certs/ssl-cert-snakeoil.pem
<span class="nv">rsa_private_key_file</span><span class="o">=</span>/etc/ssl/private/ssl-cert-snakeoil.key
<span class="nv">ssl_enable</span><span class="o">=</span>NO

<span class="c">#</span>
<span class="c"># Uncomment this to indicate that vsftpd use a utf8 filesystem.</span>
<span class="c">#utf8_filesystem=YES</span>
</pre></table></code></div></div><h3 id="parámetros-generales"><span class="mr-2">Parámetros generales</span><a href="#parámetros-generales" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>A continuación se explican algunos parámetros generales de este fichero:</p><ul><li>Establecer un mensaje de bienvenida en el servidor FTP: <code class="language-plaintext highlighter-rouge">ftpd_banner</code>.<li>Limitar el número de conexiones hacia el servidor FTP: <code class="language-plaintext highlighter-rouge">max_clients</code>.<li>Limitar el número de conexiones por IP hacia el servidor FTP: <code class="language-plaintext highlighter-rouge">max_per_ip</code>.</ul><h3 id="parámetros-para-la-gestión-de-usuarios"><span class="mr-2">Parámetros para la gestión de usuarios</span><a href="#parámetros-para-la-gestión-de-usuarios" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Los usuarios del servidor FTP son los usuarios del sistema. Crear usuarios en GNU Linux se hace de la siguiente forma:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="go">useradd -d carpeta/usuario
</span></pre></table></code></div></div><p>A continuación se explican algunos parámetros que hacen referencia a la gestión de usuarios:</p><ul><li>Habilitar o deshabilitar accesos anónimos al servidor FTP: <code class="language-plaintext highlighter-rouge">anonymous_enable</code>.<li>Habilitar o deshabilitar autenticarse a los usuarios: <code class="language-plaintext highlighter-rouge">local_enable</code>.<li>Habilitar o deshabilitar la escritura del servidor FTP: <code class="language-plaintext highlighter-rouge">write_enable</code>.<li>Habilitar el usuario anónimo para subir contenido al servidor FTP: <code class="language-plaintext highlighter-rouge">anon_upload_enable</code>.<li>Habilitar el usuario anónimo la función de crear carpetas en el servidor FTP: <code class="language-plaintext highlighter-rouge">anon_mkdir_write_enable</code>.</ul><h3 id="parámetros-para-enjaular-usuarios-chroot"><span class="mr-2">Parámetros para enjaular usuarios (Chroot)</span><a href="#parámetros-para-enjaular-usuarios-chroot" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Parámetros para enjaular a determinados usuarios, es decir, evitar que anden por otros directorios que no sean los que nosotros indicamos:</p><ul><li>Enjaular a determinados usuarios: <code class="language-plaintext highlighter-rouge">chroot_local_user</code>.<li>Habilitar o deshabilitar la lista de usuarios enjaulados: <code class="language-plaintext highlighter-rouge">chroot_list_enable</code>.<li>Indicar el fichero donde están los usuarios enjaulados: <code class="language-plaintext highlighter-rouge">chroot_list_file</code>.<li>Indicar que se permite escribir a los usuarios enjaulados: <code class="language-plaintext highlighter-rouge">allow_writeable_chroot</code>.</ul><p>En el fichero /etc/vsftpd.chroot_list introducimos la lista de usuarios del sistema que queremos enjaular. Es posible que sea necesario crear este fichero. Sólo tendremos que crear tantas líneas con usuarios del sistema que vayan a tener acceso al FTP como queramos. Los usuarios del servicio FTP serán los usuarios del sistema.</p><div file="/etc/vsftpd.chroot_list" class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="/etc/vsftpd.chroot_list"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>usuario1
usuario2
</pre></table></code></div></div><h3 id="parámetros-para-gestionar-los-permisos"><span class="mr-2">Parámetros para gestionar los permisos</span><a href="#parámetros-para-gestionar-los-permisos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Parámetros para modificar los permisos de los ficheros que suban los usuarios al servidor FTP:</p><ul><li>Establecer permisos de creación y subida de ficheros y directorios: <code class="language-plaintext highlighter-rouge">local_umask</code>.</ul><p>Si no recuerdas que es el umask o como funcionan los permisos en GNU Linux te recomiendo leer el artículo <a href="/posts/permisos-gnu-linux/">Permisos en GNU Linux</a>.</p><h3 id="parámetros-para-limitar-el-ancho-de-banda"><span class="mr-2">Parámetros para limitar el ancho de banda</span><a href="#parámetros-para-limitar-el-ancho-de-banda" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Parámetros para limitar de ancho de banda del servidor FTP:</p><ul><li>Limitar la tasa de transferencia usamos: <code class="language-plaintext highlighter-rouge">anon_max_rate</code>.<li>Limitar la tasa de los usuarios: <code class="language-plaintext highlighter-rouge">local_max_rate</code>.</ul><h2 id="bibliografía"><span class="mr-2">Bibliografía</span><a href="#bibliografía" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li><a href="https://www.alvarolara.com/2013/06/15/instalacion-y-configuracion-de-vsftpd/">Instalación y configuración de vsftpd</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/sistemas-microinform%C3%A1ticos-y-redes/'>Sistemas Microinformáticos y Redes</a>, <a href='/categories/servicios-en-red/'>Servicios en Red</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/gnu-linux/" class="post-tag no-text-decoration" >gnu linux</a> <a href="/tags/comandos/" class="post-tag no-text-decoration" >comandos</a> <a href="/tags/terminal/" class="post-tag no-text-decoration" >terminal</a> <a href="/tags/bash/" class="post-tag no-text-decoration" >bash</a> <a href="/tags/smr/" class="post-tag no-text-decoration" >smr</a> <a href="/tags/servicios-en-red/" class="post-tag no-text-decoration" >servicios en red</a> <a href="/tags/ftp/" class="post-tag no-text-decoration" >ftp</a> <a href="/tags/teor%C3%ADa/" class="post-tag no-text-decoration" >teoría</a> <a href="/tags/vsftpd/" class="post-tag no-text-decoration" >vsftpd</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Este artículo está licenciado bajo <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> por el autor.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Compartir</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Servicio VSFTPD - Marcos Ruiz&amp;url=https://marcosruiz.github.io/posts/servicio-vsfptd/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Servicio VSFTPD - Marcos Ruiz&amp;u=https://marcosruiz.github.io/posts/servicio-vsfptd/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://marcosruiz.github.io/posts/servicio-vsfptd/&amp;text=Servicio VSFTPD - Marcos Ruiz" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copiar link" data-title-succeed="Link copiado satisfactoriamente!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recientemente actualizado</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/tutorial-moodle-docker/">Tutorial: Instalar Moodle con Docker</a><li><a href="/posts/tutorial-nextcloud/">Tutorial: Monta tu propio Google Drive con NextCloud</a><li><a href="/posts/guias-estilo/">Guías de estilo</a><li><a href="/posts/callbacks-javascript/">Callbacks en JavaScript</a><li><a href="/posts/propagacion-eventos-javascript/">Propagación de eventos en JavaScript</a></ul></div><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/smr/">smr</a> <a class="post-tag" href="/tags/daw/">daw</a> <a class="post-tag" href="/tags/desarrollo-de-aplicaciones-web/">desarrollo de aplicaciones web</a> <a class="post-tag" href="/tags/teor%C3%ADa/">teoría</a> <a class="post-tag" href="/tags/ciclo-superior/">ciclo superior</a> <a class="post-tag" href="/tags/fp/">fp</a> <a class="post-tag" href="/tags/modulo/">modulo</a> <a class="post-tag" href="/tags/pr%C3%A1ctica/">práctica</a> <a class="post-tag" href="/tags/formaci%C3%B3n-profesional/">formación profesional</a> <a class="post-tag" href="/tags/seguridad-inform%C3%A1tica/">seguridad informática</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Índice</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Otros artículos</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/clientes-ftp/"><div class="card-body"> <em class="timeago small" data-ts="1642662000" > 2022-01-20 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Los dos clientes FTP que debes conocer</h3><div class="text-muted small"><p> Introducción FTP (File Transfer Protocol) es un protocolo es un protocolo de red para la transferencia de archivos entre sistemas conectados a una red TCP, basado en la arquitectura cliente-servid...</p></div></div></a></div><div class="card"> <a href="/posts/practica-proftpd-1/"><div class="card-body"> <em class="timeago small" data-ts="1641762000" > 2022-01-09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Práctica: Servicio FTP (Parte 1)</h3><div class="text-muted small"><p> Objetivo El objetivo de esta práctica es: Conocer el funcionamiento del protocolo de transferencia de archivos. Entender el modo de funcionamiento cliente-servidor. Ser capaz de gestionar ...</p></div></div></a></div><div class="card"> <a href="/posts/practica-proftpd-2/"><div class="card-body"> <em class="timeago small" data-ts="1641763800" > 2022-01-09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Práctica: Servicio FTP (Parte 2)</h3><div class="text-muted small"><p> Objetivo El objetivo de esta práctica es: Conocer el sistema de permisos de GNU Linux. Conocer el funcionamiento del UMask del servidor ProFTPD. Duración: 1,5 horas. Actividades A contin...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/practica-comandos-1/" class="btn btn-outline-primary" prompt="Más viejo"><p>Práctica: Introducción a comandos GNU Linux</p></a> <a href="/posts/enlaces-simbolicos-duros/" class="btn btn-outline-primary" prompt="Más nuevo"><p>Enlaces simbólicos y enlaces duros</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "marcosruiz/marcosruiz.github.io", "data-repo-id": "R_kgDOGm1dzA", "data-category": "General", "data-category-id": "DIC_kwDOGm1dzM4CAjhb", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "es", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/marcosruiz">Marcos Ruiz</a>. <span data-toggle="tooltip" data-placement="top" title="Excepto donde si indique lo contrario, los artículos de este blog están licenciados bajo Creative Commons Attribution 4.0 International (CC BY 4.0) Licenciado por el autor.">Algunos derechos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Desarrollado por <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> con el tema <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> .</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/smr/">smr</a> <a class="post-tag" href="/tags/daw/">daw</a> <a class="post-tag" href="/tags/desarrollo-de-aplicaciones-web/">desarrollo de aplicaciones web</a> <a class="post-tag" href="/tags/teor%C3%ADa/">teoría</a> <a class="post-tag" href="/tags/ciclo-superior/">ciclo superior</a> <a class="post-tag" href="/tags/fp/">fp</a> <a class="post-tag" href="/tags/modulo/">modulo</a> <a class="post-tag" href="/tags/pr%C3%A1ctica/">práctica</a> <a class="post-tag" href="/tags/formaci%C3%B3n-profesional/">formación profesional</a> <a class="post-tag" href="/tags/seguridad-inform%C3%A1tica/">seguridad informática</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! Resultado no encontrado.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/es.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-GS5HW4NZ8V"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-GS5HW4NZ8V'); }); </script>
