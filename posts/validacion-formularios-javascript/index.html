<!DOCTYPE html><html lang="es" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Validación de formularios en JavaScript" /><meta property="og:locale" content="es" /><meta name="description" content="Introducción" /><meta property="og:description" content="Introducción" /><link rel="canonical" href="https://marcosruiz.github.io/posts/validacion-formularios-javascript/" /><meta property="og:url" content="https://marcosruiz.github.io/posts/validacion-formularios-javascript/" /><meta property="og:site_name" content="Marcos Ruiz" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-10-24T10:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Validación de formularios en JavaScript" /><meta name="twitter:site" content="@whataweekhuh" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-02-10T14:12:11+01:00","datePublished":"2024-10-24T10:00:00+02:00","description":"Introducción","headline":"Validación de formularios en JavaScript","mainEntityOfPage":{"@type":"WebPage","@id":"https://marcosruiz.github.io/posts/validacion-formularios-javascript/"},"url":"https://marcosruiz.github.io/posts/validacion-formularios-javascript/"}</script><title>Validación de formularios en JavaScript | Marcos Ruiz</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Marcos Ruiz"><meta name="application-name" content="Marcos Ruiz"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://avatars.githubusercontent.com/u/7647613?v=4 " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Marcos Ruiz</a></div><div class="site-subtitle font-italic">Trabaja duro para ser vago</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>INICIO</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORÍAS</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>ETIQUETAS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVOS</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>SOBRE MÍ</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/marcosruiz" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['profesor.mruizg','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Inicio </a> </span> <span>Validación de formularios en JavaScript</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Artículo</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Buscar..."> </span> <span id="search-cancel" >Cancelar</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Validación de formularios en JavaScript</h1><div class="post-meta text-muted"><div> <em> <a href="https://github.com/marcosruiz">Marcos Ruiz</a> </em></div><div class="d-flex"><div> <span> <em class="timeago" data-ts="1729756800" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2024-10-24 </em> </span> <span> Actualizado <em class="timeago" data-ts="1739193131" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2025-02-10 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3744 palabras"> <em>20 minutos</em> lectura</span></div></div></div><div class="post-content"><h2 class="section" id="introducción">Introducción</h2><p>En una aplicación web, la validación de los formularios se realiza tanto en el lado del cliente como en el del servidor.</p><p>De hecho, la única validación estrictamente necesaria se debe hacer en el servidor para evitar peticiones ilegales por clientes como postman o <code class="language-plaintext highlighter-rouge">curl</code>.</p><p>Pero se puede usar Javascript para mucho más que validar formularios. Por ejemplo, nos puede ayudar a autocompletar campos, descargar datos en segundo plano o tratar con imágenes o datos complejos antes de enviar al servidor.</p><p class="question">¿Qué es postman?</p><p class="question">¿Qué es <code class="language-plaintext highlighter-rouge">curl</code>?</p><h2 class="section" id="modificación-de-los-inputs-de-un-formulario">Modificación de los inputs de un formulario</h2><p>El contenido de los campos de entrada en un formulario se puede visualizar y modificar utilizando el atributo <code class="language-plaintext highlighter-rouge">value</code>. Otros elementos del formulario, como los botones de opción (<code class="language-plaintext highlighter-rouge">radio button</code>) y las casillas de verificación (<code class="language-plaintext highlighter-rouge">checkbox</code>), deben tener un <code class="language-plaintext highlighter-rouge">name</code> común y también utilizan los atributos <code class="language-plaintext highlighter-rouge">value</code> y <code class="language-plaintext highlighter-rouge">checked</code>. Para los elementos <code class="language-plaintext highlighter-rouge">select</code>, se utilizan los atributos <code class="language-plaintext highlighter-rouge">options</code> y <code class="language-plaintext highlighter-rouge">selectedIndex</code>.</p><p>Observa el ejemplo a continuación, que usa la manera (obsoleta) de asociar eventos <code class="language-plaintext highlighter-rouge">onclick</code> para ejecutar una función que informa de los valores de los inputs en consola y modifica los inputs del formulario con JavaScript:</p><div file="index.html" class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="index.html"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"es"</span><span class="nt">&gt;</span>

<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>Formulario de Ejemplo<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"exampleForm"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"textInput"</span><span class="nt">&gt;</span>Texto:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"textInput"</span> <span class="na">value=</span><span class="s">"Texto inicial"</span><span class="nt">&gt;&lt;br&gt;&lt;br&gt;</span>

    <span class="nt">&lt;label&gt;</span>Opciones:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"options"</span> <span class="na">value=</span><span class="s">"opcion1"</span> <span class="na">checked</span><span class="nt">&gt;</span> Opción 1
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"options"</span> <span class="na">value=</span><span class="s">"opcion2"</span><span class="nt">&gt;</span> Opción 2<span class="nt">&lt;br&gt;&lt;br&gt;</span>

    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"checkboxInput"</span><span class="nt">&gt;</span>Casilla:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"checkboxInput"</span> <span class="na">checked</span><span class="nt">&gt;&lt;br&gt;&lt;br&gt;</span>

    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"selectInput"</span><span class="nt">&gt;</span>Selecciona:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"selectInput"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Opción 1<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span> <span class="na">selected</span><span class="nt">&gt;</span>Opción 2<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Opción 3<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;&lt;br&gt;&lt;br&gt;</span>

    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">onclick=</span><span class="s">"manipulateValues()"</span><span class="nt">&gt;</span>Ver y Manipular Valores<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/form&gt;</span>

  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"script.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><div file="script.js" class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="script.js"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">manipulateValues</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Obtener el valor del campo de texto</span>
  <span class="kd">let</span> <span class="nx">textInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">textInput</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Valor del campo de texto:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">textInput</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
  <span class="nx">textInput</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Nuevo texto</span><span class="dl">"</span><span class="p">;</span>

  <span class="c1">// Obtener el valor del radio button seleccionado</span>
  <span class="kd">let</span> <span class="nx">selectedOption</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">input[name="options"]:checked</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Valor del radio button seleccionado:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">selectedOption</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
  <span class="c1">// Cambiar la selección del radio button</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span>
    <span class="dl">'</span><span class="s1">input[name="options"][value="opcion2"]</span><span class="dl">'</span>
  <span class="p">).</span><span class="nx">checked</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

  <span class="c1">// Obtener el valor del checkbox</span>
  <span class="kd">let</span> <span class="nx">checkboxInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">checkboxInput</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Checkbox está marcado:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">checkboxInput</span><span class="p">.</span><span class="nx">checked</span><span class="p">);</span>
  <span class="c1">// Cambiar el estado del checkbox</span>
  <span class="nx">checkboxInput</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="o">!</span><span class="nx">checkboxInput</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>

  <span class="c1">// Obtener el valor del select</span>
  <span class="kd">let</span> <span class="nx">selectInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">selectInput</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Valor del select:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">selectInput</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
  <span class="c1">// Cambiar la selección del select</span>
  <span class="nx">selectInput</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">3</span><span class="dl">"</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 class="section" id="ciclo-del-formulario-con-javascript">Ciclo del Formulario con JavaScript</h2><p>Podemos interceptar y detener el ciclo por defecto de un formulario para validarlo y enviarlo utilizando JavaScript. De esta manera, podemos evitar tener un botón <code class="language-plaintext highlighter-rouge">submit</code> y controlar completamente el proceso de envío. Si el formulario envía datos al servidor y se refresca, JavaScript pierde el control del programa. Para evitar esto, podemos utilizar <code class="language-plaintext highlighter-rouge">preventDefault()</code> dentro del evento <code class="language-plaintext highlighter-rouge">submit</code> o devolver <code class="language-plaintext highlighter-rouge">false</code>.</p><h3 class="subsection" id="ejemplo-de-cómo-interceptar-el-evento-submit-con-el-atributo-onsubmit">Ejemplo de cómo interceptar el evento submit con el atributo onsubmit</h3><p>Podemos manejar eventos de formularios para personalizar su comportamiento. Un ejemplo común es el uso del evento <code class="language-plaintext highlighter-rouge">onsubmit</code> para ejecutar una función de validación antes de enviar el formulario. Si la función de validación devuelve <code class="language-plaintext highlighter-rouge">true</code>, el formulario se envía; de lo contrario, se cancela el envío.</p><p>El atributo <code class="language-plaintext highlighter-rouge">onsubmit</code> en un elemento form en HTML se usa para ejecutar una función de JavaScript cuando el formulario se envía. Se activa <strong>antes</strong> de que el formulario sea enviado.</p><div file="index.html" class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="index.html"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"es"</span><span class="nt">&gt;</span>

<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>Formulario con Validación<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"styles.css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>

  <span class="nt">&lt;h1&gt;</span>Formulario HTML con validación previa con JavaScript a pelo<span class="nt">&lt;/h1&gt;</span>

  <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"formulario"</span> <span class="na">onsubmit=</span><span class="s">"return validar();"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"phone-number"</span> <span class="na">required</span><span class="nt">&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Enviar<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/form&gt;</span>

  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"script.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><div file="script.js" class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="script.js"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">validar</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">phoneNumber</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">phone-number</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">phoneRGEX</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">[</span><span class="sr">(</span><span class="se">]{0,1}[</span><span class="sr">0-9</span><span class="se">]{3}[</span><span class="sr">)</span><span class="se">]{0,1}[</span><span class="sr">-</span><span class="se">\s\.]{0,1}[</span><span class="sr">0-9</span><span class="se">]{3}[</span><span class="sr">-</span><span class="se">\s\.]{0,1}[</span><span class="sr">0-9</span><span class="se">]{4}</span><span class="sr">$/</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">phoneResult</span> <span class="o">=</span> <span class="nx">phoneRGEX</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">phoneNumber</span><span class="p">);</span>
  <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">phone: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">phoneResult</span><span class="p">);</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">phoneResult</span> <span class="o">==</span> <span class="kc">false</span><span class="p">){</span>
    <span class="kd">let</span> <span class="nx">phoneInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">phone-number</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">phoneInput</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">phoneResult</span><span class="p">;</span> <span class="c1">// Retorna true si es válido, de lo contrario false</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 class="section" id="validación-de-formularios">Validación de formularios</h2><p>Puesto que podemos interceptar el ciclo del formulario o atender a cualquier evento y leer y escribir el <code class="language-plaintext highlighter-rouge">value</code> de los inputs, validar el formulario es sencillo. No obstante, cuando hay que hacer muchos formularios o muy grandes, el código puede resultar farragoso. En ese caso, hay técnicas como crear funciones validadoras que hacen el código más sencillo y fácil de mantener.</p><details class="card mb-2"> <summary class="card-header question">¿Qué son las funciones validadoras?</summary><div class="card-body"><p>Las funciones validadoras en JavaScript son funciones diseñadas para verificar si los datos ingresados cumplen con ciertos criterios antes de procesarlos o enviarlos.</p></div></details><h3 class="subsection" id="expresiones-regulares">Expresiones Regulares</h3><p>Los campos de los formularios pueden ser validados utilizando expresiones regulares.</p><p>Lee el artículo <a href="/posts/expresiones-regulares/">Expresiones regulares</a>.</p><h3 class="subsection" id="validación-mediante-la-api-de-validación-de-formularios">Validación mediante la API de validación de formularios</h3><p>Mediante JavaScript tenemos acceso a todos los campos del formulario por lo que podemos hacer la validación como queramos, pero es una tarea pesada, repetitiva y que provoca código espaguetti difícil de leer y mantener más adelante.</p><p class="question">¿Qué es el código espaguetti?</p><p>Para hacerla más simple podemos usar la API de validación de formularios de HTML5 que permite que sea el navegador quien se encargue de comprobar la validez de cada campo pero las acciones (mostrar mensajes de error, no enviar el formulario, etc.) las realizamos desde Javascript.</p><p>Esto nos da la ventaja de:</p><ul><li>Los requisitos de validación de cada campo están como atributos HTML de dicho campo por lo que son fáciles de ver.<li>Nos evitamos la mayor parte del código dedicada a comprobar si el contenido del campo es válido. Nosotros mediante la API sólo preguntamos si se cumplen o no y tomamos las medidas adecuadas.<li>Aprovechamos las pseudo-clases <code class="language-plaintext highlighter-rouge">:valid</code> o <code class="language-plaintext highlighter-rouge">:invalid</code> que el navegador pone automáticamente a los campos por lo que no tenemos que añadirles clases para destacarlos.</ul><p>Las principales propiedades y métodos que nos proporciona esta API son:</p><ul><li><code class="language-plaintext highlighter-rouge">checkValidity()</code>: método booleano que nos dice si el campo al que se aplica es o no válido. También se puede aplicar al formulario para saber si es válido o no.<li><code class="language-plaintext highlighter-rouge">setCustomValidity(mensaje)</code>: añade un error personalizado al campo (que ahora ya NO será válido para el navegador) con el mensaje pasado como parámetro. Por ejemplo podemos usarlo para indicar que el nick elegido no es válido porque ya está en uso por otro usuario. Para quitar este error se hace <code class="language-plaintext highlighter-rouge">setCustomValidity('')</code>.<li><code class="language-plaintext highlighter-rouge">validationMessage</code>: en caso de que un campo no sea válido esta propiedad contiene el texto del error de validación proporcionado por el navegador. Si es válido esta propiedad es una cadena vacía.<li><code class="language-plaintext highlighter-rouge">validity</code> (<a href="https://developer.mozilla.org/en-US/docs/Web/API/ValidityState">documentación aquí</a>): es un objeto que tiene propiedades booleanas para saber qué requisito del campo es el que falla:<ul><li><code class="language-plaintext highlighter-rouge">valueMissing</code>: indica si no se cumple el atributo <code class="language-plaintext highlighter-rouge">required</code> (es decir, valdrá true si el campo tiene el atributo required pero no se ha introducido nada en él).<li><code class="language-plaintext highlighter-rouge">typeMismatch</code>: indica si el contenido del campo no cumple con su atributo <code class="language-plaintext highlighter-rouge">type</code> (ej. <code class="language-plaintext highlighter-rouge">type="email"</code>).<li><code class="language-plaintext highlighter-rouge">patternMismatch</code>: indica si no se cumple con el <code class="language-plaintext highlighter-rouge">pattern</code> indicado en su atributo.<li><code class="language-plaintext highlighter-rouge">tooShort</code> / <code class="language-plaintext highlighter-rouge">tooLong</code>: indican si no se cumple el atributo <code class="language-plaintext highlighter-rouge">minlength</code> o <code class="language-plaintext highlighter-rouge">maxlength</code> respectivamente.<li><code class="language-plaintext highlighter-rouge">rangeUnderflow</code> / <code class="language-plaintext highlighter-rouge">rangeOverflow</code>: indica si no se cumple el atributo <code class="language-plaintext highlighter-rouge">min</code> / <code class="language-plaintext highlighter-rouge">max</code>.<li><code class="language-plaintext highlighter-rouge">stepMismatch</code>: indica si no se cumple el atributo <code class="language-plaintext highlighter-rouge">step</code> del campo.<li><code class="language-plaintext highlighter-rouge">customError</code>: indica al campo se le ha puesto un error personalizado con <code class="language-plaintext highlighter-rouge">setCustomValidity</code>.<li><code class="language-plaintext highlighter-rouge">valid</code>: indica si es campo es válido.</ul></ul><p>En la página de <a href="https://www.w3schools.com/js/js_validation_api.asp">W3Schools</a> podéis ver algún ejemplo básico de esto.</p><h4 class="subsubsection" id="ejemplo-para-ver-los-valores-de-checkvalidity-y-validationmessage">Ejemplo para ver los valores de checkValidity y validationMessage</h4><p>A continuación tenéis un ejemplo simple del valor de las diferentes propiedades involucradas en la validación de un campo de texto que es obligatorio y cuyo tamaño debe estar entre 5 y 50 caracteres:</p><div file="index.html" class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="index.html"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"es"</span><span class="nt">&gt;</span>

<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>Formulario con Validación<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"styles.css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>

  <span class="nt">&lt;h1&gt;</span>Formulario HTML con validación previa utilizando el validationMessage de la API JavaScript<span class="nt">&lt;/h1&gt;</span>

  <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"formulario"</span> <span class="na">onsubmit=</span><span class="s">"return validar();"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label&gt;</span>Nombre:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">required</span> <span class="na">minlength=</span><span class="s">"5"</span> <span class="na">maxlength=</span><span class="s">"50"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"error"</span> <span class="na">class=</span><span class="s">"error"</span><span class="nt">&gt;&lt;/span&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"comprueba"</span><span class="nt">&gt;</span>Comprueba<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;p&gt;</span>checkValidity: <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"checkValidity"</span><span class="nt">&gt;&lt;/span&gt;&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>validationMessage: <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"validationMessage"</span><span class="nt">&gt;&lt;/span&gt;&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>validity.valueMissing: <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"valueMissing"</span><span class="nt">&gt;&lt;/span&gt;&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>validity.tooShort: <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"tooShort"</span><span class="nt">&gt;&lt;/span&gt;&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>validity.tooLong: <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"tooLong"</span><span class="nt">&gt;&lt;/span&gt;&lt;/p&gt;</span>
  <span class="nt">&lt;/form&gt;</span>

  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"script.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><div file="script.js" class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="script.js"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">comprueba</span><span class="dl">'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">inputName</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">'</span><span class="s1">input</span><span class="dl">'</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>

  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">inputName</span><span class="p">.</span><span class="nx">validationMessage</span><span class="p">;</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">checkValidity</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">inputName</span><span class="p">.</span><span class="nx">checkValidity</span><span class="p">();</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">validationMessage</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">inputName</span><span class="p">.</span><span class="nx">validationMessage</span><span class="p">;</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">valueMissing</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">inputName</span><span class="p">.</span><span class="nx">validity</span><span class="p">.</span><span class="nx">valueMissing</span><span class="p">;</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">tooShort</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">inputName</span><span class="p">.</span><span class="nx">validity</span><span class="p">.</span><span class="nx">tooShort</span><span class="p">;</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">tooLong</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">inputName</span><span class="p">.</span><span class="nx">validity</span><span class="p">.</span><span class="nx">tooLong</span><span class="p">;</span>
<span class="p">})</span>
</pre></table></code></div></div><div file="styles.css" class="language-css highlighter-rouge"><div class="code-header"> <span data-label-text="styles.css"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nc">.error</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Para validar un formulario nosotros pero usando esta API debemos añadir al <code class="language-plaintext highlighter-rouge">form</code> el atributo <code class="language-plaintext highlighter-rouge">novalidate</code> que hace que no se encargue el navegador de mostrar los mensajes de error ni de decidir si se envía o no el formulario (aunque sí valida los campos) sino que lo haremos nosotros.</p><p>Como puedes ver, en caso de que un campo no sea válido, se puede manipular las clases CSS o mostrar un mensaje de error. Aquí entra el tema de la usabilidad. Estamos muy acostumbrados a un comportamiento de los formularios que nos informe de si estamos haciendo las cosas bien. Por ejemplo: un <code class="language-plaintext highlighter-rouge">input</code> que no haya sido manipulado de momento, no debería mostrarse como erróneo. Pero si ya se ha escrito algo en él y saltamos de <code class="language-plaintext highlighter-rouge">input</code>, ya debería mostrarse como erróneo. Esto también puede ser farragoso y siempre es mejor separar por funciones puras la validación y la aplicación de estilos.</p><h4 class="subsubsection" id="ejemplo-de-validación-con-mensajes-de-error-en-elementos-span-del-html">Ejemplo de validación con mensajes de error en elementos span del HTML</h4><p>Un ejemplo sencillo de validación de un formulario podría ser:</p><div file="index.html" class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="index.html"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"es"</span><span class="nt">&gt;</span>

<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>Formulario con Validación<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"styles.css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>

  <span class="nt">&lt;h1&gt;</span>Formulario HTML con mensajes de error en elementos span del HTML<span class="nt">&lt;/h1&gt;</span>

  <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">novalidate</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"nombre"</span><span class="nt">&gt;</span>Por favor, introduzca su nombre (entre 5 y 50 caracteres): <span class="nt">&lt;/span&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"nombre"</span> <span class="na">name=</span><span class="s">"nombre"</span> <span class="na">required</span> <span class="na">minlength=</span><span class="s">"5"</span> <span class="na">maxlength=</span><span class="s">"50"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"error"</span><span class="nt">&gt;&lt;/label&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"mail"</span><span class="nt">&gt;</span>Por favor, introduzca una dirección de correo electrónico: <span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"email"</span> <span class="na">id=</span><span class="s">"mail"</span> <span class="na">name=</span><span class="s">"mail"</span> <span class="na">required</span> <span class="na">minlength=</span><span class="s">"8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"error"</span><span class="nt">&gt;&lt;/span&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Enviar<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/form&gt;</span>

  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"script.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><div file="script.js" class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="script.js"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">form</span>  <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">'</span><span class="s1">form</span><span class="dl">'</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">nombre</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">nombre</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nombreError</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#nombre + span.error</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">email</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">mail</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">emailError</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#mail + span.error</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">form</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">submit</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">form</span><span class="p">.</span><span class="nx">checkValidity</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="nx">nombreError</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">nombre</span><span class="p">.</span><span class="nx">validationMessage</span><span class="p">;</span>
  <span class="nx">emailError</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">email</span><span class="p">.</span><span class="nx">validationMessage</span><span class="p">;</span>
<span class="p">});</span>
</pre></table></code></div></div><div file="style.css" class="language-css highlighter-rouge"><div class="code-header"> <span data-label-text="style.css"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nc">.error</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">input</span><span class="nd">:invalid</span> <span class="p">{</span>
  <span class="nl">border</span><span class="p">:</span> <span class="m">2px</span> <span class="nb">dashed</span> <span class="no">red</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Estamos usando:</p><ul><li><code class="language-plaintext highlighter-rouge">validationMessage</code> para mostrar el posible error de cada campo, o quitar el error cuando el campo sea válido.<li><code class="language-plaintext highlighter-rouge">checkValidity()</code> para no enviar/procesar el formulario si contiene errores.</ul><h4 class="subsubsection" id="ejemplo-utilizando-setcustomvalidity-para-añadir-mensajes-de-error-personalizados">Ejemplo utilizando setCustomValidity para añadir mensajes de error personalizados</h4><p>Si tenemos que validar algo que no puede hacerse mediante atributos HTML (por ejemplo si el nombre de usuario ya está en uso) deberemos hacer la validación “a mano” y en caso de no ser válido ponerle un error con <code class="language-plaintext highlighter-rouge">.setCustomValidity()</code>, pero debemos recordar quitar el error si todo es correcto o el formulario siempre será inválido. Modificando el ejemplo:</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">form</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">"</span><span class="s2">form</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">nombre</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">nombre</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">nombreError</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#nombre + span.error</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">email</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">mail</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">emailError</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#mail + span.error</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">form</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">submit</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">nombre</span><span class="p">.</span><span class="nx">value</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">admin</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">nombre</span><span class="p">.</span><span class="nx">setCustomValidity</span><span class="p">(</span><span class="dl">"</span><span class="s2">El nombre de usuario 'admin' no está permitido.</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">nombre</span><span class="p">.</span><span class="nx">setCustomValidity</span><span class="p">(</span><span class="dl">""</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="nx">nombreError</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">nombre</span><span class="p">.</span><span class="nx">validationMessage</span><span class="p">;</span>
  <span class="nx">emailError</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">email</span><span class="p">.</span><span class="nx">validationMessage</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">form</span><span class="p">.</span><span class="nx">checkValidity</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">form</span><span class="p">.</span><span class="nx">submit</span><span class="p">();</span> <span class="c1">// Envía el formulario directamente al servidor sin ejecutar los eventos asociados a submit.</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></table></code></div></div><blockquote class="prompt-info"><div><p>Existen múltiples librerías que facilitan enormemente el tedioso trabajo de validar un formulario. Un ejemplo es <a href="https://www.npmjs.com/package/yup">yup</a>.</p></div></blockquote><h3 class="subsection" id="validación-de-ficheros">Validación de ficheros</h3><p>Los ficheros deben ser validados en el lado del servidor, pero nosotros también podemos validarlos en la parte de cliente para mejorar la usabilidad. Validar los ficheros en el lado del cliente mejora la usabilidad al proporcionar retroalimentación inmediata a los usuarios sobre cualquier problema con sus archivos antes de que intenten subirlos al servidor. Esto puede ahorrar tiempo y frustración tanto para el usuario como para el servidor.</p><p>Aquí hay un ejemplo completo que ilustra cómo realizar estas validaciones en un formulario HTML:</p><div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"fileForm"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">id=</span><span class="s">"fileInput"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Enviar<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"errorMessage"</span> <span class="na">class=</span><span class="s">"error"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></table></code></div></div><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
</pre><td class="rouge-code"><pre><span class="nb">document</span>
  <span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">fileForm</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">submit</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">fileInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">fileInput</span><span class="dl">"</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">fileInput</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kd">const</span> <span class="nx">errorMessage</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">errorMessage</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">errorMessage</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>

    <span class="c1">// Validación del tamaño del fichero (por ejemplo, 2MB máximo)</span>
    <span class="kd">const</span> <span class="nx">maxSize</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">;</span> <span class="c1">// 2MB</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">size</span> <span class="o">&gt;</span> <span class="nx">maxSize</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">errorMessage</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span>
        <span class="dl">"</span><span class="s2">El fichero es demasiado grande. El tamaño máximo es de 2MB.</span><span class="dl">"</span><span class="p">;</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Validación del tipo de fichero</span>
    <span class="kd">const</span> <span class="nx">allowedTypes</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">image/jpeg</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">image/png</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">image/gif</span><span class="dl">"</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">allowedTypes</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">type</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">errorMessage</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span>
        <span class="dl">"</span><span class="s2">Tipo de fichero no permitido. Solo se permiten imágenes (jpeg, png, gif).</span><span class="dl">"</span><span class="p">;</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Validación del nombre del fichero (sin caracteres especiales)</span>
    <span class="kd">const</span> <span class="nx">regex</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">[</span><span class="sr">a-zA-Z0-9_</span><span class="se">\-\.]</span><span class="sr">+$/</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">regex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">errorMessage</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span>
        <span class="dl">"</span><span class="s2">El nombre del fichero contiene caracteres no permitidos.</span><span class="dl">"</span><span class="p">;</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Si todas las validaciones son correctas, proceder a la subida del fichero</span>
    <span class="kd">const</span> <span class="nx">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FileReader</span><span class="p">();</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">onloadend</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">base64String</span> <span class="o">=</span> <span class="nx">reader</span><span class="p">.</span><span class="nx">result</span>
        <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">data:</span><span class="dl">"</span><span class="p">,</span> <span class="dl">""</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^.+,/</span><span class="p">,</span> <span class="dl">""</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">jsonData</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">fileName</span><span class="p">:</span> <span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
        <span class="na">fileType</span><span class="p">:</span> <span class="nx">file</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
        <span class="na">fileData</span><span class="p">:</span> <span class="nx">base64String</span><span class="p">,</span>
      <span class="p">};</span>

      <span class="nx">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">/upload-json</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
          <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">),</span>
      <span class="p">})</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
    <span class="p">};</span>

    <span class="nx">reader</span><span class="p">.</span><span class="nx">readAsDataURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
  <span class="p">});</span>
</pre></table></code></div></div><h3 class="subsection" id="imágenes-en-formularios">Imágenes en formularios</h3><p>Las imágenes son un tipo interesante de ficheros, ya que se pueden previsualizar.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">encodeFileAsURL</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">fileURL</span> <span class="o">=</span> <span class="nx">URL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
    <span class="nx">callback</span><span class="p">(</span><span class="nx">fileURL</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">No file provided or file is invalid.</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">handleFileInputChange</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">previewElementId</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="nx">encodeFileAsURL</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">fileURL</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">previewElementId</span><span class="p">).</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">fileURL</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">attachFileInputHandler</span><span class="p">(</span><span class="nx">inputElementId</span><span class="p">,</span> <span class="nx">previewElementId</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">document</span>
    <span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">inputElementId</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">change</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">handleFileInputChange</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">previewElementId</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="c1">// Attach the handler for avatar file input</span>
<span class="nx">attachFileInputHandler</span><span class="p">(</span><span class="dl">"</span><span class="s2">avatar</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">avatar_prev</span><span class="dl">"</span><span class="p">);</span>
</pre></table></code></div></div><p>Puede que los usuarios envíen imágenes demasiado grandes. Si queremos reducir el tiempo de carga y el espacio en disco del servidor, las podemos reducir antes de enviar. El siguiente ejemplo recoge la imagen, la pone en un canvas virtual y vuelve a recuperar la imagen reducida para enviarla:</p><div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">id=</span><span class="s">"imageInput"</span> <span class="na">accept=</span><span class="s">"image/*"</span><span class="nt">&gt;</span>
<span class="nt">&lt;img</span> <span class="na">id=</span><span class="s">"imagePreview"</span> <span class="na">alt=</span><span class="s">"Previsualización de la imagen"</span><span class="nt">&gt;</span>
<span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"uploadButton"</span><span class="nt">&gt;</span>Subir Imagen<span class="nt">&lt;/button&gt;</span>
</pre></table></code></div></div><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">resizeImage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">maxWidth</span><span class="p">,</span> <span class="nx">maxHeight</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FileReader</span><span class="p">();</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">load</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">img</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">();</span>
      <span class="nx">img</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
      <span class="nx">img</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">load</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">canvas</span><span class="dl">"</span><span class="p">);</span>
        <span class="kd">let</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">img</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">img</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">width</span> <span class="o">&gt;</span> <span class="nx">height</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">width</span> <span class="o">&gt;</span> <span class="nx">maxWidth</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">height</span> <span class="o">*=</span> <span class="nx">maxWidth</span> <span class="o">/</span> <span class="nx">width</span><span class="p">;</span>
            <span class="nx">width</span> <span class="o">=</span> <span class="nx">maxWidth</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">height</span> <span class="o">&gt;</span> <span class="nx">maxHeight</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">width</span> <span class="o">*=</span> <span class="nx">maxHeight</span> <span class="o">/</span> <span class="nx">height</span><span class="p">;</span>
            <span class="nx">height</span> <span class="o">=</span> <span class="nx">maxHeight</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
        <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="dl">"</span><span class="s2">2d</span><span class="dl">"</span><span class="p">);</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">);</span>

        <span class="nx">canvas</span><span class="p">.</span><span class="nx">toBlob</span><span class="p">(</span>
          <span class="p">(</span><span class="nx">blob</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">blob</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">resolve</span><span class="p">(</span><span class="nx">blob</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nx">reject</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error al redimensionar la imagen</span><span class="dl">"</span><span class="p">));</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">file</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
          <span class="mf">0.9</span>
        <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">});</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span>
      <span class="nx">reject</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error al leer el archivo</span><span class="dl">"</span><span class="p">))</span>
    <span class="p">);</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">readAsDataURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 class="subsection" id="otros-ficheros">Otros ficheros</h3><p>Hay muchas cosas que se pueden hacer con otro tipo de ficheros antes de subirlos al servidor, o incluso sin subirlos nunca. Por ejemplo, se puede previsualizar el contenido de un fichero de texto:</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">formFileInput</span> <span class="o">=</span> <span class="nx">fileForm</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#formFile</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">formFileInput</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">change</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">formFileInput</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kd">let</span> <span class="nx">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FileReader</span><span class="p">();</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">readAsText</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">load</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">fileForm</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#previewFile</span><span class="dl">"</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">reader</span><span class="p">.</span><span class="nx">result</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">});</span>
</pre></table></code></div></div><p>O incluso de un fichero PDF:</p><div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divLogin"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">id=</span><span class="s">"pdfInput"</span> <span class="na">accept=</span><span class="s">"application/pdf"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;embed</span> <span class="na">id=</span><span class="s">"pdfPreview"</span> <span class="na">type=</span><span class="s">"application/pdf"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></table></code></div></div><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">previewPDF</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">previewElementId</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">file</span> <span class="o">&amp;&amp;</span> <span class="nx">file</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">application/pdf</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">fileURL</span> <span class="o">=</span> <span class="nx">URL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">previewElementId</span><span class="p">).</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">fileURL</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">El archivo seleccionado no es un PDF.</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>También se puede, gracias a HTML5, reproducir un fichero de audio:</p><div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">id=</span><span class="s">"audioInput"</span> <span class="na">accept=</span><span class="s">"audio/*"</span><span class="nt">&gt;</span>
<span class="nt">&lt;audio</span> <span class="na">id=</span><span class="s">"audioPreview"</span> <span class="na">controls</span><span class="nt">&gt;</span>
  Tu navegador no soporta el elemento de audio.
<span class="nt">&lt;/audio&gt;</span>
</pre></table></code></div></div><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">previewAudio</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">previewElementId</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">file</span> <span class="o">&amp;&amp;</span> <span class="nx">file</span><span class="p">.</span><span class="nx">type</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="dl">"</span><span class="s2">audio/</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">fileURL</span> <span class="o">=</span> <span class="nx">URL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">previewElementId</span><span class="p">).</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">fileURL</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">El archivo seleccionado no es un audio válido.</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h4 class="subsubsection" id="el-objeto-file">El Objeto File</h4><p>Un objeto <code class="language-plaintext highlighter-rouge">File</code> en JavaScript representa un archivo que se ha seleccionado a través de un elemento <code class="language-plaintext highlighter-rouge">&lt;input type="file"&gt;</code> o que se ha creado mediante la API de archivos. Este objeto hereda de <code class="language-plaintext highlighter-rouge">Blob</code> y, por lo tanto, tiene todos las propiedades y métodos de un <code class="language-plaintext highlighter-rouge">Blob</code>, además de algunas propiedades específicos para los archivos. Aquí tenemos una lista de las <strong>propiedades principales del objeto <code class="language-plaintext highlighter-rouge">File</code></strong> y su utilidad:</p><ul><li><code class="language-plaintext highlighter-rouge">name</code><ul><li><strong>Descripción</strong>: El nombre del archivo, incluido su extensión.<li><strong>Utilidad</strong>: Utilizado para mostrar o manipular el nombre del archivo. Por ejemplo, se puede mostrar al usuario el nombre del archivo que se ha seleccionado o utilizarlo para enviarlo al servidor.</ul><li><code class="language-plaintext highlighter-rouge">lastModified</code><ul><li><strong>Descripción</strong>: El timestamp (en milisegundos desde el 1 de enero de 1970) de la última vez que el archivo fue modificado.<li><strong>Utilidad</strong>: Permite conocer la fecha y hora de la última modificación del archivo. Puede ser útil para sincronización, control de versiones o simplemente para mostrar esta información al usuario.</ul><li><code class="language-plaintext highlighter-rouge">lastModifiedDate</code> (obsoleto, usar <code class="language-plaintext highlighter-rouge">lastModified</code> en su lugar)<ul><li><strong>Descripción</strong>: Un objeto <code class="language-plaintext highlighter-rouge">Date</code> que representa la fecha de la última modificación del archivo.<li><strong>Utilidad</strong>: Similar a <code class="language-plaintext highlighter-rouge">lastModified</code>, pero como un objeto <code class="language-plaintext highlighter-rouge">Date</code>. Este atributo está obsoleto y no se recomienda su uso.</ul><li><code class="language-plaintext highlighter-rouge">size</code><ul><li><strong>Descripción</strong>: El tamaño del archivo en bytes.<li><strong>Utilidad</strong>: Permite conocer el tamaño del archivo. Es útil para validar si el archivo cumple con los requisitos de tamaño antes de subirlo o para mostrar esta información al usuario.</ul><li><code class="language-plaintext highlighter-rouge">type</code><ul><li><strong>Descripción</strong>: El tipo MIME del archivo (por ejemplo, <code class="language-plaintext highlighter-rouge">"image/png"</code> o <code class="language-plaintext highlighter-rouge">"application/pdf"</code>).<li><strong>Utilidad</strong>: Utilizado para determinar el tipo de contenido del archivo. Esto es útil para validar el tipo de archivo que se ha seleccionado, para decidir cómo procesarlo o para enviarlo al servidor con el tipo correcto.</ul></ul><p>El objeto <code class="language-plaintext highlighter-rouge">File</code> también hereda todos los <strong>métodos de <code class="language-plaintext highlighter-rouge">Blob</code></strong>, lo que permite manipular el contenido del archivo de varias maneras. Algunos de estos métodos incluyen:</p><ul><li><code class="language-plaintext highlighter-rouge">slice([start[, end[, contentType]]])</code><ul><li><strong>Descripción</strong>: Crea un nuevo <code class="language-plaintext highlighter-rouge">Blob</code> representando una porción del archivo original.<li><strong>Utilidad</strong>: Permite trabajar con una parte específica del archivo, lo cual puede ser útil para subir archivos en partes o para manipular solo una sección del archivo.</ul><li><code class="language-plaintext highlighter-rouge">text()</code><ul><li><strong>Descripción</strong>: Devuelve una promesa que se resuelve con el contenido del <code class="language-plaintext highlighter-rouge">Blob</code> como una cadena de texto.<li><strong>Utilidad</strong>: Permite leer el contenido de un archivo como texto, lo que es útil para archivos de texto, CSV, JSON, etc.</ul><li><code class="language-plaintext highlighter-rouge">arrayBuffer()</code><ul><li><strong>Descripción</strong>: Devuelve una promesa que se resuelve con el contenido del <code class="language-plaintext highlighter-rouge">Blob</code> como un <code class="language-plaintext highlighter-rouge">ArrayBuffer</code>.<li><strong>Utilidad</strong>: Útil para trabajar con datos binarios de bajo nivel.</ul><li><code class="language-plaintext highlighter-rouge">stream()</code><ul><li><strong>Descripción</strong>: Devuelve un <code class="language-plaintext highlighter-rouge">ReadableStream</code> del contenido del <code class="language-plaintext highlighter-rouge">Blob</code>.<li><strong>Utilidad</strong>: Permite trabajar con el contenido del archivo como un flujo de datos, lo que puede ser útil para grandes archivos que necesitan ser procesados por partes.</ul></ul><h4 class="subsubsection" id="el-objeto-filereader">El objeto FileReader</h4><p>El objeto <code class="language-plaintext highlighter-rouge">FileReader</code> en JavaScript proporciona una forma de leer archivos de forma asíncrona desde el cliente, utilizando el API File de HTML5. Estos son las principales propiedades y métodos del objeto <code class="language-plaintext highlighter-rouge">FileReader</code>:</p><h5 class="subsubsection" id="propiedades-del-objeto-filereader">Propiedades del objeto FileReader</h5><ul><li><code class="language-plaintext highlighter-rouge">readyState</code>:<ul><li><strong>Descripción</strong>: Indica el estado actual de la operación de lectura del archivo.<li><strong>Valores posibles</strong>:<ul><li><code class="language-plaintext highlighter-rouge">EMPTY</code> (0): Objeto recién creado, sin archivo asignado.<li><code class="language-plaintext highlighter-rouge">LOADING</code> (1): Archivo está siendo leído.<li><code class="language-plaintext highlighter-rouge">DONE</code> (2): Lectura del archivo completada correctamente.</ul><li><strong>Uso</strong>: Puede ser útil para controlar el flujo de trabajo y saber cuándo ha finalizado la lectura del archivo.</ul><li><code class="language-plaintext highlighter-rouge">result</code>:<ul><li><strong>Descripción</strong>: Contiene los datos del archivo leído, representados como una cadena de caracteres o como un <code class="language-plaintext highlighter-rouge">ArrayBuffer</code>, dependiendo del método utilizado para leer el archivo.<li><strong>Uso</strong>: Después de que la lectura del archivo sea exitosa, este atributo contiene los datos del archivo en el formato especificado.</ul></ul><h5 class="subsubsection" id="métodos-del-objeto-filereader">Métodos del objeto FileReader</h5><ul><li><code class="language-plaintext highlighter-rouge">readAsArrayBuffer(file)</code>:<ul><li><strong>Descripción</strong>: Lee el contenido del archivo como un <code class="language-plaintext highlighter-rouge">ArrayBuffer</code>.<li><strong>Uso</strong>: Útil cuando se trabaja con datos binarios, como imágenes o archivos PDF.</ul><li><code class="language-plaintext highlighter-rouge">readAsBinaryString(file)</code>:<ul><li><strong>Descripción</strong>: Lee el contenido del archivo como una cadena binaria (<code class="language-plaintext highlighter-rouge">String</code>).<li><strong>Uso</strong>: Aunque está en desuso, puede ser útil para leer archivos en formatos antiguos que no son compatibles con readAsText.</ul><li><code class="language-plaintext highlighter-rouge">readAsDataURL(file)</code>:<ul><li><strong>Descripción</strong>: Lee el contenido del archivo y devuelve una URL de datos (<code class="language-plaintext highlighter-rouge">data URL</code>) que representa los datos del archivo.<li><strong>Uso</strong>: Muy común para leer imágenes y otros tipos de archivos que pueden ser representados como URLs de datos en el navegador.</ul><li><code class="language-plaintext highlighter-rouge">readAsText(file, encoding)</code>:<ul><li><strong>Descripción</strong>: Lee el contenido del archivo como texto (<code class="language-plaintext highlighter-rouge">String</code>), utilizando una codificación opcional.<li><strong>Uso</strong>: Ideal para archivos de texto como archivos de configuración o documentos de texto plano.</ul><li><code class="language-plaintext highlighter-rouge">abort()</code>:<ul><li><strong>Descripción</strong>: Cancela la operación de lectura del archivo en curso.<li><strong>Uso</strong>: Útil si se desea interrumpir la lectura de un archivo antes de que se complete, por ejemplo, en respuesta a una acción del usuario.</ul><li><strong>Asincronía</strong>: Todas las operaciones de lectura del <code class="language-plaintext highlighter-rouge">FileReader</code> son asíncronas, lo que significa que se debe manejar el resultado (o error) en los callbacks adecuados (<code class="language-plaintext highlighter-rouge">onload</code>, <code class="language-plaintext highlighter-rouge">onerror</code>).<li><strong>Seguridad</strong>: Debido a las políticas de seguridad del navegador, la lectura de archivos locales puede estar limitada. Es importante entender y respetar estas limitaciones al desarrollar aplicaciones web que interactúan con archivos del cliente.</ul><h2 id="bibliografía"><span class="mr-2">Bibliografía</span><a href="#bibliografía" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li><a href="https://xxjcaxx.github.io/libro_dwec/dom.html">https://xxjcaxx.github.io/libro_dwec/dom.html</a><li><a href="https://lenguajejs.com/">https://lenguajejs.com/</a><li><a href="https://learnxinyminutes.com/docs/es-es/javascript-es/">https://learnxinyminutes.com/docs/es-es/javascript-es/</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/desarrollo-de-aplicaciones-web/'>Desarrollo de Aplicaciones Web</a>, <a href='/categories/desarrollo-web-en-entorno-cliente/'>Desarrollo Web en Entorno Cliente</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/fp/" class="post-tag no-text-decoration" >fp</a> <a href="/tags/ciclo-superior/" class="post-tag no-text-decoration" >ciclo superior</a> <a href="/tags/modulo/" class="post-tag no-text-decoration" >modulo</a> <a href="/tags/formaci%C3%B3n-profesional/" class="post-tag no-text-decoration" >formación profesional</a> <a href="/tags/daw/" class="post-tag no-text-decoration" >daw</a> <a href="/tags/desarrollo-de-aplicaciones-web/" class="post-tag no-text-decoration" >desarrollo de aplicaciones web</a> <a href="/tags/desarrollo-web-en-entorno-cliente/" class="post-tag no-text-decoration" >desarrollo web en entorno cliente</a> <a href="/tags/dwec/" class="post-tag no-text-decoration" >dwec</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Este artículo está licenciado bajo <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> por el autor.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Compartir</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Validación de formularios en JavaScript - Marcos Ruiz&amp;url=https://marcosruiz.github.io/posts/validacion-formularios-javascript/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Validación de formularios en JavaScript - Marcos Ruiz&amp;u=https://marcosruiz.github.io/posts/validacion-formularios-javascript/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://marcosruiz.github.io/posts/validacion-formularios-javascript/&amp;text=Validación de formularios en JavaScript - Marcos Ruiz" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copiar link" data-title-succeed="Link copiado satisfactoriamente!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recientemente actualizado</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/tutorial-moodle-docker/">Tutorial: Instalar Moodle con Docker</a><li><a href="/posts/tutorial-nextcloud/">Tutorial: Monta tu propio Google Drive con NextCloud</a><li><a href="/posts/guias-estilo/">Guías de estilo</a><li><a href="/posts/callbacks-javascript/">Callbacks en JavaScript</a><li><a href="/posts/propagacion-eventos-javascript/">Propagación de eventos en JavaScript</a></ul></div><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/smr/">smr</a> <a class="post-tag" href="/tags/daw/">daw</a> <a class="post-tag" href="/tags/desarrollo-de-aplicaciones-web/">desarrollo de aplicaciones web</a> <a class="post-tag" href="/tags/teor%C3%ADa/">teoría</a> <a class="post-tag" href="/tags/ciclo-superior/">ciclo superior</a> <a class="post-tag" href="/tags/fp/">fp</a> <a class="post-tag" href="/tags/modulo/">modulo</a> <a class="post-tag" href="/tags/pr%C3%A1ctica/">práctica</a> <a class="post-tag" href="/tags/formaci%C3%B3n-profesional/">formación profesional</a> <a class="post-tag" href="/tags/seguridad-inform%C3%A1tica/">seguridad informática</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Índice</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Otros artículos</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/vue/"><div class="card-body"> <em class="timeago small" data-ts="1741593600" > 2025-03-10 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Vue</h3><div class="text-muted small"><p> Introducción El uso de un framework nos facilita enormemente el trabajo a la hora de crear una aplicación. Vue.js es un framework de JavaScript utilizado para crear interfaces de usuario (UI) y ap...</p></div></div></a></div><div class="card"> <a href="/posts/desarrollo-web-entorno-cliente-24-25/"><div class="card-body"> <em class="timeago small" data-ts="1722931200" > 2024-08-06 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Desarrollo Web en Entorno Cliente 24 25</h3><div class="text-muted small"><p> Unidades UD1 - Arquitecturas y lenguajes de programación en clientes web Integración de código JavaScript Trabajar con Visual Studio Code UD2 - Fundamentos de la prog...</p></div></div></a></div><div class="card"> <a href="/posts/arquitecturas-lenguajes-programacion-cliente-web/"><div class="card-body"> <em class="timeago small" data-ts="1725264000" > 2024-09-02 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Arquitecturas y lenguajes de programación en clientes web</h3><div class="text-muted small"><p> Introducción La web fue inicialmente concebida y creada por Tim Berners-Lee, un especialista del laboratorio europeo de partículas (CERN) en 1989. En sus mismas palabras, había una “necesidad de u...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/validacion-formularios-html/" class="btn btn-outline-primary" prompt="Más viejo"><p>Validación de formularios en HTML</p></a> <a href="/posts/eventos-javascript/" class="btn btn-outline-primary" prompt="Más nuevo"><p>Eventos en JavaScript</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "marcosruiz/marcosruiz.github.io", "data-repo-id": "R_kgDOGm1dzA", "data-category": "General", "data-category-id": "DIC_kwDOGm1dzM4CAjhb", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "es", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/marcosruiz">Marcos Ruiz</a>. <span data-toggle="tooltip" data-placement="top" title="Excepto donde si indique lo contrario, los artículos de este blog están licenciados bajo Creative Commons Attribution 4.0 International (CC BY 4.0) Licenciado por el autor.">Algunos derechos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Desarrollado por <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> con el tema <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> .</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/smr/">smr</a> <a class="post-tag" href="/tags/daw/">daw</a> <a class="post-tag" href="/tags/desarrollo-de-aplicaciones-web/">desarrollo de aplicaciones web</a> <a class="post-tag" href="/tags/teor%C3%ADa/">teoría</a> <a class="post-tag" href="/tags/ciclo-superior/">ciclo superior</a> <a class="post-tag" href="/tags/fp/">fp</a> <a class="post-tag" href="/tags/modulo/">modulo</a> <a class="post-tag" href="/tags/pr%C3%A1ctica/">práctica</a> <a class="post-tag" href="/tags/formaci%C3%B3n-profesional/">formación profesional</a> <a class="post-tag" href="/tags/seguridad-inform%C3%A1tica/">seguridad informática</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! Resultado no encontrado.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/es.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-GS5HW4NZ8V"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-GS5HW4NZ8V'); }); </script>
