<!DOCTYPE html><html lang="es" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Práctica: Firma digital con GPG" /><meta property="og:locale" content="es" /><meta name="description" content="Objetivo y duración" /><meta property="og:description" content="Objetivo y duración" /><link rel="canonical" href="https://marcosruiz.github.io/posts/practica-firma-digital-gpg/" /><meta property="og:url" content="https://marcosruiz.github.io/posts/practica-firma-digital-gpg/" /><meta property="og:site_name" content="Marcos Ruiz" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-10-24T10:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Práctica: Firma digital con GPG" /><meta name="twitter:site" content="@whataweekhuh" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-11-17T12:43:14+01:00","datePublished":"2022-10-24T10:00:00+02:00","description":"Objetivo y duración","headline":"Práctica: Firma digital con GPG","mainEntityOfPage":{"@type":"WebPage","@id":"https://marcosruiz.github.io/posts/practica-firma-digital-gpg/"},"url":"https://marcosruiz.github.io/posts/practica-firma-digital-gpg/"}</script><title>Práctica: Firma digital con GPG | Marcos Ruiz</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Marcos Ruiz"><meta name="application-name" content="Marcos Ruiz"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://avatars.githubusercontent.com/u/7647613?v=4 " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Marcos Ruiz</a></div><div class="site-subtitle font-italic">Trabaja duro para ser vago</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>INICIO</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORÍAS</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>ETIQUETAS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVOS</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>SOBRE MÍ</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/marcosruiz" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['profesor.mruizg','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Inicio </a> </span> <span>Práctica: Firma digital con GPG</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Artículo</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Buscar..."> </span> <span id="search-cancel" >Cancelar</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Práctica: Firma digital con GPG</h1><div class="post-meta text-muted"><div> <em> <a href="https://github.com/marcosruiz">Marcos Ruiz</a> </em></div><div class="d-flex"><div> <span> <em class="timeago" data-ts="1666598400" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-10-24 </em> </span> <span> Actualizado <em class="timeago" data-ts="1668685394" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-11-17 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1256 palabras"> <em>6 minutos</em> lectura</span></div></div></div><div class="post-content"><h2 id="objetivo-y-duración"><span class="mr-2">Objetivo y duración</span><a href="#objetivo-y-duración" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>El objetivo de esta práctica es conocer el mecanismo de firma digital que tiene el programa GPG.</p><p>Duración: 3 horas.</p><h2 id="entrega-y-presentación"><span class="mr-2">Entrega y presentación</span><a href="#entrega-y-presentación" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>La entrega de esta práctica debe ser un fichero PDF con un nombre en el siguiente formato “&lt;Apellidos&gt;_&lt;Nombre&gt;_P&lt;NúmeroDeLaPráctica&gt;.pdf”. Por ejemplo, en mi caso el nombre del fichero PDF sería “RuizGarcía_Marcos_P04.pdf”.</p><p>Asegúrate de que el documento PDF cumple con los siguientes parámetros:</p><ol><li>Debe contener una portada con título, nombre de la asignatura, curso, autor y fecha de realización.<li>Debe tener un índice actualizado con hiperenlaces a las diferentes secciones y el número de página donde están.<li>Debe tener cada página numerada.<li>Las actividades deberán estar numeradas y ordenadas de manera que se ignore el “3.”. Por ejemplo, la sección “3.1. Actividad” será “1. Actividad” o “Actividad 1” en la entrega del alumno.<li>Cada actividad debe tener <strong>el enunciado en negrita</strong> y la respuesta en texto normal.<li>Cada imagen debe tener un pie de foto la cual tenga el siguiente formato: “Figura &lt;número&gt;: &lt;BreveDescripciónDeLaFigura&gt;”.<li>El documento no debe contener faltas ortográficas.<li>Los comandos y ficheros de configuración que hayas utilizado deben quedar reflejados en el PDF de la entrega en texto para permitirte copiar y pegar el día del examen todos los comandos de una manera rápida.<li>Los comandos y documentos de configuración que se muestren en el documento PDF deben tener un estilo de letra monospace como puede ser el tipo de letra Consolas o Courier New. Por ejemplo: <code class="language-plaintext highlighter-rouge">$sudo apt install neofetch</code>.<li>Para las actividades a mano se deberá hacer una foto a la resolución del ejercicio y añadirla al PDF.</ol><h2 id="evaluación"><span class="mr-2">Evaluación</span><a href="#evaluación" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>La realización de la práctica valdrá un 50% y el test sobre la misma el otro 50%.</p><h2 id="actividades"><span class="mr-2">Actividades</span><a href="#actividades" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>A continuación se listan las actividades que se deben realizar. Te recuerdo que cada vez que se haga referencia a “&lt;usuario&gt;” este deberá ser sustituido por tu nombre de usuario específico, en mi caso será “mrug” debido a que mi correo es mrug@tiempos.org.</p><h3 class="activity" id="firma-digital-con-2-ficheros">Firma digital con 2 ficheros</h3><h4 id="paso-1"><span class="mr-2">Paso 1</span><a href="#paso-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>En la sesión “&lt;usuario&gt;”, crearemos un fichero llamado contrato.txt y lo firmaremos con nuestra clave privada para que cualquiera pueda confirmar que es nuestro. Usaremos el parámetro <code class="language-plaintext highlighter-rouge">--detach-sign</code>, que crea un fichero nuevo solo con la firma (hash del fichero original cifrado). Utilizaremos también el parámetro <code class="language-plaintext highlighter-rouge">-a</code> para poder observar ese fichero en caracteres ASCII.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span>gpg <span class="nt">-a</span> <span class="nt">--detach-sign</span> contrato.txt
</pre></table></code></div></div><p>Cuando vayamos a firmar, la herramienta nos pedirá contraseña para acceder a nuestra clave privada.</p><h4 id="paso-2"><span class="mr-2">Paso 2</span><a href="#paso-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>El resultado del cifrado será un nuevo fichero contrato.txt.asc. Si lo abres con la herramienta cat, te podrás fijar que la primera línea indica que es una firma (PGP SIGNATURE).</p><h4 id="paso-3"><span class="mr-2">Paso 3</span><a href="#paso-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Ahora, deberíamos realizar el envío al usuario “&lt;usuario&gt;2”. Recuerda que al usuario “&lt;usuario&gt;2” deberás enviarle 2 ficheros: el fichero original que no lleva la firma (contrato.txt) y la firma (contrato.txt.asc).</p><h4 id="paso-4"><span class="mr-2">Paso 4</span><a href="#paso-4" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Iniciarías sesión con el usuario “&lt;usuario&gt;2” y copiarías los ficheros a tu directorio de trabajo (/home/&lt;usuario&gt;2/practicaFirmaDigitalConGgp). Ahora, lo que deberíamos hacer sería comprobar la firma. Para ello deberás utilizar el parámetro <code class="language-plaintext highlighter-rouge">--verify</code> junto con el nombre del fichero que lleva la firma (contrato.txt.asc). Te recuerdo que en esta máquina ya estaba la clave pública del usuario “&lt;usuario&gt;”.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span>gpg <span class="nt">--verify</span> contrato.txt.asc 
</pre></table></code></div></div><p>El mensaje de la herramienta dice que, efectivamente, el fichero contrato.txt.asc ha sido firmado por el dueño de la clave privada cuya clave pública tenemos almacenada con esa misma identificación (nombre, huella, etc.) También insiste en que no está confirmado que efectivamente esa sea su clave.</p><h4 id="paso-5"><span class="mr-2">Paso 5</span><a href="#paso-5" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Puedes probar a alterar algún carácter dentro del fichero original o dentro del fichero cifrado. La verificación fallará.</p><blockquote class="prompt-info"><div><p>📷 Realiza las capturas de pantalla necesarias con los comentarios pertinentes que te permitan ver como procedes en tus máquinas para llevar a cabo los pasos que se te han explicado anteriormente.</p></div></blockquote><h3 class="activity" id="firma-digital-con-1-solo-fichero">Firma digital con 1 solo fichero</h3><h4 id="paso-6"><span class="mr-2">Paso 6</span><a href="#paso-6" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Para evitar enviar 2 ficheros al usuario “&lt;usuario&gt;2”, podemos incluir todo (fichero y firma) en el mismo. Volvemos a la sesión de “&lt;usuario&gt;” y ahora firmamos con el parámetro <code class="language-plaintext highlighter-rouge">--clear-sign</code>.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span>gpg <span class="nt">-a</span> <span class="nt">--clear-sign</span> contrato.txt
</pre></table></code></div></div><h4 id="paso-7"><span class="mr-2">Paso 7</span><a href="#paso-7" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Copia de nuevo dicho fichero en la máquina del “&lt;usuario&gt;2”. El comando de verificación es el mismo que en el caso de 2 ficheros:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span>gpg <span class="nt">--verify</span> contrato.txt.asc 
</pre></table></code></div></div><h4 id="paso-8"><span class="mr-2">Paso 8</span><a href="#paso-8" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Hasta ahora, el fichero mensaje.txt.asc estaba accesible, bien porque estaba separado de la firma, bien porque estaba junto a ella pero en texto en claro. Si usamos la opción <code class="language-plaintext highlighter-rouge">--sign</code> tendremos un fichero único (con el texto y la firma) e ilegible:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span>gpg <span class="nt">-a</span> <span class="nt">--sign</span> contrato.txt 
</pre></table></code></div></div><h4 id="paso-9"><span class="mr-2">Paso 9</span><a href="#paso-9" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>De nuevo podemos llevar al directorio de trabajo del usuario “&lt;usuario&gt;2”, para que haga una copia y lo verifique. Si además queremos extraer el fichero, utilizaremos la opción <code class="language-plaintext highlighter-rouge">--decrypt</code>.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span>gpg <span class="nt">--decrypt</span> <span class="nt">-o</span> contrato.txt contrato.txt.asc
</pre></table></code></div></div><p>Aunque esta protección es bastante débil, porque cualquiera que tenga la clave pública del “&lt;usuario&gt;”, tendrá acceso al contenido del fichero.</p><blockquote class="prompt-info"><div><p>📷 Realiza las capturas de pantalla necesarias con los comentarios pertinentes que te permitan ver como procedes en tus máquinas para llevar a cabo los pasos que se te han explicado anteriormente.</p></div></blockquote><h3 class="activity" id="firma-digital-encriptada">Firma digital encriptada</h3><h4 id="paso-10"><span class="mr-2">Paso 10</span><a href="#paso-10" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Deberíamos utilizar el cifrado normal, lo que nos llevará a que el usuario “&lt;usuario&gt;2” genere su par de claves (Hasta de ahora no había sido necesario).</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span>gpg <span class="nt">--full-generate-key</span>
</pre></table></code></div></div><p>En el “&lt;usuario&gt;2” tendremos 2 llaves: las nuestras (publica/privada) y la pública del “&lt;usuario&gt;”. Puedes comprobarlo mediante el comando:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span>gpg <span class="nt">--list-keys</span>
</pre></table></code></div></div><h4 id="paso-11"><span class="mr-2">Paso 11</span><a href="#paso-11" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Ahora por fin podemos confirmar que la clave pública del usuario “&lt;usuario&gt;” es auténtica. Desde el usuario “&lt;usuario&gt;2”, utilizaremos el parámetro <code class="language-plaintext highlighter-rouge">--sign-key</code> y el identificador de la clave.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span>gpg <span class="nt">--sign-key</span> &lt;usuario&gt;@tiempos.org
</pre></table></code></div></div><p>Desde ahora las verificaciones ya no emitirán el aviso de la clave es sospechosa.</p><h4 id="paso-12"><span class="mr-2">Paso 12</span><a href="#paso-12" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Para que el “&lt;usuario&gt;” nos puede cifrar el fichero firmado, deberemos seguir el procedimiento conocido:</p><p>Exportar la clave pública del “&lt;usuario&gt;2”:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span>gpg <span class="nt">-a</span> <span class="nt">--export</span> &lt;usuario&gt;2@tiempos.org <span class="o">&gt;</span> &lt;usuario&gt;2.public.key
</pre></table></code></div></div><p>Importarla en el “&lt;usuario&gt;”:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span>gpg <span class="nt">--import</span> &lt;usuario&gt;2.public.key
</pre></table></code></div></div><p>En la sesión del “&lt;usuario&gt;”, podemos usar la opción <code class="language-plaintext highlighter-rouge">--list-keys</code> para consultar todas las claves que tiene almacenadas.</p><h4 id="paso-13"><span class="mr-2">Paso 13</span><a href="#paso-13" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>En la sesión del “&lt;usuario&gt;”, generaríamos un nuevo fichero (contrato2.txt), lo cifraremos para que solo el “&lt;usuario&gt;2” pueda recuperarlo y lo firmaremos para que sepa que es nuestro. Primero firmaremos la clave pública del “&lt;usuario&gt;2” para evitar mensajes de error. Después ejecutaremos <code class="language-plaintext highlighter-rouge">--sign</code> y <code class="language-plaintext highlighter-rouge">--encript</code>.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="gp">$</span>gpg <span class="nt">--sign-key</span> &lt;usuario&gt;2
<span class="gp">$</span>gpg <span class="nt">-a</span> <span class="nt">--sign</span> <span class="nt">--encrypt</span> <span class="nt">--recipient</span> &lt;usuario&gt;2 contrato2.txt <span class="o">&gt;</span> contrato2.txt.asc
</pre></table></code></div></div><h4 id="paso-14"><span class="mr-2">Paso 14</span><a href="#paso-14" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Obtendremos el fichero contrato2.txt.asc que es ilegible y lleva dentro el contenido del fichero contrato2.txt y la firma. Se lo pasaremos al “&lt;usuario&gt;2” para que en su sesión pueda descifrarlo, verificar la firma y descifrarlo. Recuerda usar el parámetro <code class="language-plaintext highlighter-rouge">--decrypt</code>, porque también nos ofrece la confirmación de la firma. Nos pedirá la contraseña que protege la clave privada de “&lt;usuario&gt;2”, necesaria para descifrar el fichero.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="nb">cat </span>contrato2.txt.asc
<span class="gp">$</span>gpg <span class="nt">--decrypt</span> <span class="nt">-o</span> contrato2.txt contrato2.txt.asc
<span class="gp">$</span><span class="nb">cat </span>contrato2.txt
</pre></table></code></div></div><p>Si no tuviéramos la clave privada de “&lt;usuario&gt;2”, no podríamos descifrar ni por tanto, recuperar el archivo y comprobar la firma. Borra nuestras propias claves con los parámetros <code class="language-plaintext highlighter-rouge">--delete-secrte-key</code> y <code class="language-plaintext highlighter-rouge">--delete-key</code>. Comprueba que ya no funciona ni descifrar ni verificar. El mensaje de error indicará que el fichero fue cifrado con una clave que ya no tenemos.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="gp">$</span>gpg <span class="nt">--delete-secret-key</span> &lt;usuario&gt;2@tiempos.org
<span class="gp">$</span>gpg <span class="nt">--delete-key</span> &lt;usuario&gt;2@tiempos.org
<span class="gp">$</span>gpg <span class="nt">--list-keys</span>
<span class="gp">$</span>gpg <span class="nt">--decrypt</span> contrato2.txt.asc
<span class="gp">$</span>gpg <span class="nt">--verify</span> contrato2.txt.asc
</pre></table></code></div></div><blockquote class="prompt-info"><div><p>📷 Realiza las capturas de pantalla necesarias con los comentarios pertinentes que te permitan ver como procedes en tus máquinas para llevar a cabo los pasos que se te han explicado anteriormente.</p></div></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/sistemas-microinform%C3%A1ticos-y-redes/'>Sistemas Microinformáticos y Redes</a>, <a href='/categories/seguridad-inform%C3%A1tica/'>Seguridad Informática</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/seguridad-inform%C3%A1tica/" class="post-tag no-text-decoration" >seguridad informática</a> <a href="/tags/smr/" class="post-tag no-text-decoration" >smr</a> <a href="/tags/pr%C3%A1ctica/" class="post-tag no-text-decoration" >práctica</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Este artículo está licenciado bajo <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> por el autor.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Compartir</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Práctica: Firma digital con GPG - Marcos Ruiz&amp;url=https://marcosruiz.github.io/posts/practica-firma-digital-gpg/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Práctica: Firma digital con GPG - Marcos Ruiz&amp;u=https://marcosruiz.github.io/posts/practica-firma-digital-gpg/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://marcosruiz.github.io/posts/practica-firma-digital-gpg/&amp;text=Práctica: Firma digital con GPG - Marcos Ruiz" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copiar link" data-title-succeed="Link copiado satisfactoriamente!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recientemente actualizado</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/tutorial-moodle-docker/">Tutorial: Instalar Moodle con Docker</a><li><a href="/posts/tutorial-nextcloud/">Tutorial: Monta tu propio Google Drive con NextCloud</a><li><a href="/posts/guias-estilo/">Guías de estilo</a><li><a href="/posts/callbacks-javascript/">Callbacks en JavaScript</a><li><a href="/posts/propagacion-eventos-javascript/">Propagación de eventos en JavaScript</a></ul></div><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/smr/">smr</a> <a class="post-tag" href="/tags/daw/">daw</a> <a class="post-tag" href="/tags/desarrollo-de-aplicaciones-web/">desarrollo de aplicaciones web</a> <a class="post-tag" href="/tags/teor%C3%ADa/">teoría</a> <a class="post-tag" href="/tags/ciclo-superior/">ciclo superior</a> <a class="post-tag" href="/tags/fp/">fp</a> <a class="post-tag" href="/tags/modulo/">modulo</a> <a class="post-tag" href="/tags/pr%C3%A1ctica/">práctica</a> <a class="post-tag" href="/tags/formaci%C3%B3n-profesional/">formación profesional</a> <a class="post-tag" href="/tags/seguridad-inform%C3%A1tica/">seguridad informática</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Índice</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Otros artículos</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/practica-seguridad-activa/"><div class="card-body"> <em class="timeago small" data-ts="1643239800" > 2022-01-27 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Práctica: Seguridad activa</h3><div class="text-muted small"><p> Objetivo El objetivo de esta práctica es: Proteger los sistemas BIOS y GRUB. Hacer uso de VLANs, VPNs, DMZs, cortafuegos, etc. Hacer uso de ACL y TCP Wrappers. Instalar y configurar fail...</p></div></div></a></div><div class="card"> <a href="/posts/practica-sai/"><div class="card-body"> <em class="timeago small" data-ts="1667462400" > 2022-11-03 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Práctica: SAI</h3><div class="text-muted small"><p> Objetivo y duración El objetivo de esta práctica es aprender a comprar SAI dependiendo de nuestras necesidades y presupuesto. Duración: 3 horas. Entrega y presentación La entrega de esta prácti...</p></div></div></a></div><div class="card"> <a href="/posts/practica-seguridad-activa-sistemas-operativos/"><div class="card-body"> <em class="timeago small" data-ts="1671436800" > 2022-12-19 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Práctica: Seguridad activa de sistemas operativos</h3><div class="text-muted small"><p> Objetivo y duración El objetivo de esta práctica es aprender a utilizar diversos sistemas de seguridad activa de un sistema operativo. Duración: 8 h Entrega y presentación La entrega será en fo...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/practica-capa-enlace/" class="btn btn-outline-primary" prompt="Más viejo"><p>Práctica: Capa de enlace</p></a> <a href="/posts/practica-css-freecodecamp/" class="btn btn-outline-primary" prompt="Más nuevo"><p>Tarea: CSS en freeCodeCamp</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "marcosruiz/marcosruiz.github.io", "data-repo-id": "R_kgDOGm1dzA", "data-category": "General", "data-category-id": "DIC_kwDOGm1dzM4CAjhb", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "es", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/marcosruiz">Marcos Ruiz</a>. <span data-toggle="tooltip" data-placement="top" title="Excepto donde si indique lo contrario, los artículos de este blog están licenciados bajo Creative Commons Attribution 4.0 International (CC BY 4.0) Licenciado por el autor.">Algunos derechos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Desarrollado por <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> con el tema <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> .</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/smr/">smr</a> <a class="post-tag" href="/tags/daw/">daw</a> <a class="post-tag" href="/tags/desarrollo-de-aplicaciones-web/">desarrollo de aplicaciones web</a> <a class="post-tag" href="/tags/teor%C3%ADa/">teoría</a> <a class="post-tag" href="/tags/ciclo-superior/">ciclo superior</a> <a class="post-tag" href="/tags/fp/">fp</a> <a class="post-tag" href="/tags/modulo/">modulo</a> <a class="post-tag" href="/tags/pr%C3%A1ctica/">práctica</a> <a class="post-tag" href="/tags/formaci%C3%B3n-profesional/">formación profesional</a> <a class="post-tag" href="/tags/seguridad-inform%C3%A1tica/">seguridad informática</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! Resultado no encontrado.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/es.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-GS5HW4NZ8V"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-GS5HW4NZ8V'); }); </script>
