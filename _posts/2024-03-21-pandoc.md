---
title: "Pandoc"
date: 2024-03-21 9:00:00 +0100
categories: [General]
tags: [pandoc, markdown, pdf, md, eisvogel, plantilla, docker, latex, lua, lualatex, plantilla, jekyll]
img_path: /assets/img/pandoc/
---

## Introducción

Este artículo pretende ser una guía para transformar documentos de Markdown a documentos PDF.

## Instalar Eisvogel en Windows

Puedes seguir los pasos del README de <https://github.com/Wandmalfarbe/pandoc-latex-template?tab=readme-ov-file>.

Si ya tienes docker lo único que tienes que hacer es descargar el contenedor:

```console
docker pull pandoc/extra
```

Una vez instalado el contenedor podemos ejecutar el comando para ejecutar el comando que transforme nuestro `.md` a `.pdf`. En mi caso he instalado Docker en Windows 11 por lo que la estructura del comando que he usado es el siguiente:

```console
docker run --rm --volume "<carpeta donde están los .md>:/data" pandoc/extra <entrada>.md -o <salida>.pdf --template eisvogel --listings
```

Ejemplo:

```console
docker run pandoc/extra
```

## De documentos Markdown para Jekyll a documentos PDF

Con el siguiente comando y los siguientes ficheros de configuración me genero este [PDF](/assets/img/pandoc/2024-03-01-tarea-xsl.pdf) a mi gusto:

```console
docker run --rm --volume "C:\Users\marco\Documents\GitHub\marcosruiz.github.io\:/data" `
--volume "C:\Users\marco\Documents\MEGA\CURSO 23 24\Plantillas\Eisvogel:/root/.pandoc/templates" `
pandoc/extra /data/_posts/2024-03-01-tarea-xsl.md `
-o /data/pdf/2024-03-01-tarea-xsl.pdf `
--metadata-file /data/pandoc/metadata.yaml `
--defaults /data/pandoc/defaults.yaml `
--lua-filter /data/pandoc/filter.lua
```

```yaml
listings: true
shift-heading-level-by: -1
number-sections: true
resource-path: ["/data/assets/img/tarea-xsl"]
template: "eisvogel2"
```
{: file="defaults.yaml" }

```yaml
author: [Marcos Ruiz García]
titlepage: true
toc-own-page: true
toc: true
lang: es-ES
```
{: file="metadata.yaml" }

```lua
-- Filtro para clase activity
function ParaActivity(el)
  -- Si el elemento es un párrafo y contiene "{:.activity}", lo convertimos en un encabezado
  if el.tag == "Para" then
    local content = pandoc.utils.stringify(el)
    -- Si el párrafo contiene "{:.activity}", lo convertimos en un encabezado de nivel 2
    if content:find("{:%.activity}") then
      -- Reemplazamos "{:.activity}" con una cadena vacía
      content = content:gsub("{:%.activity} ###", "")
      -- Creamos un nuevo elemento de encabezado con el contenido modificado
      return pandoc.Header(2, content)
    end
    return el
  end
  -- Devolvemos el elemento sin cambios si no es un párrafo
  return el
end

-- Filtro para clase section
function ParaSection(el)
  -- Si el elemento es un párrafo y contiene "{:.section}", lo convertimos en un encabezado
  if el.tag == "Para" then
    local content = pandoc.utils.stringify(el)
    -- Si el párrafo contiene "{:.section}", lo convertimos en un encabezado de nivel 2
    if content:find("{:%.section}") then
      -- Reemplazamos "{:.section}" con una cadena vacía
      content = content:gsub("{:%.section} ##", "")
      -- Creamos un nuevo elemento de encabezado con el contenido modificado
      return pandoc.Header(1, content)
    end
    return el
  end
  -- Devolvemos el elemento sin cambios si no es un párrafo
  return el
end

-- Filtro para clase subsection
function ParaSubsection(el)
  -- Si el elemento es un párrafo y contiene "{:.subsection}", lo convertimos en un encabezado
  if el.tag == "Para" then
    local content = pandoc.utils.stringify(el)
    -- Si el párrafo contiene "{:.subsection}", lo convertimos en un encabezado de nivel 2
    if content:find("{:%.subsection}") then
      -- Reemplazamos "{:.subsection}" con una cadena vacía
      content = content:gsub("{:%.subsection} ###", "")
      -- Creamos un nuevo elemento de encabezado con el contenido modificado
      return pandoc.Header(2, content)
    end
    return el
  end
  -- Devolvemos el elemento sin cambios si no es un párrafo
  return el
end

-- Filtro para clase subsubsection
function ParaSubsubsection(el)
  -- Si el elemento es un párrafo y contiene "{:.subsubsection}", lo convertimos en un encabezado
  if el.tag == "Para" then
    local content = pandoc.utils.stringify(el)
    -- Si el párrafo contiene "{:.subsubsection}", lo convertimos en un encabezado de nivel 2
    if content:find("{:%.subsubsection}") then
      -- Reemplazamos "{:.subsubsection}" con una cadena vacía
      content = content:gsub("{:%.subsubsection} ####", "")
      -- Creamos un nuevo elemento de encabezado con el contenido modificado
      return pandoc.Header(3, content)
    end
    return el
  end
  -- Devolvemos el elemento sin cambios si no es un párrafo
  return el
end

-- Filtro para clase prompt-info, prompt-tip, prompt-warning, prompt-danger
function RemovePrompts(el)
  -- Si el elemento es un párrafo y contiene "{:.prompt-.*}", lo convertimos en un encabezado
  if el.tag == "Para" then
    local content = pandoc.utils.stringify(el)
    -- Si el párrafo contiene "{:.prompt-.*}", lo convertimos en un encabezado de nivel 2
    if content:find("{:%s?%.prompt%-.+}") then
      -- Reemplazamos "{:.prompt-.*}" con una cadena vacía
      content = content:gsub("{:%s?%.prompt%-.+}", "")
      -- Creamos un nuevo elemento de encabezado con el contenido modificado
      return pandoc.Para(content)
    end
    return el
  end
  -- Devolvemos el elemento sin cambios si no es un párrafo
  return el
end

-- Filtro para clase filepath
function RemoveFilepaths(el)
  -- Si el elemento es un párrafo y contiene "{:.filepath}", lo convertimos en un encabezado
  if el.tag == "Para" then
    local content = pandoc.utils.stringify(el)
    -- Si el párrafo contiene "{:.filepath}", lo convertimos en un encabezado de nivel 2
    if content:find("{:%s?%.filepath}") then
      -- Reemplazamos "{:.filepath}" con una cadena vacía
      content = content:gsub("{:%s?%.filepath}", "")
      -- Creamos un nuevo elemento de encabezado con el contenido modificado
      return pandoc.Para(content)
    end
    return el
  end
  -- Devolvemos el elemento sin cambios si no es un párrafo
  return el
end

-- Filtro para los nombres de los ficheros
function ExtractFilePath(el)
  -- Si el elemento es un párrafo
  if el.tag == "Para" then
    local content = pandoc.utils.stringify(el)
    -- Buscamos los párrafos que empiezan por "{: file=\"" y terminan con "\" }"
    local filepath = content:match("{:%s?file=“(.-)”%s?}")
    -- Si encontramos un filepath, devolvemos un nuevo párrafo con el filepath como contenido
    if filepath then
      return pandoc.Para("Fichero: " .. filepath)
    end
  end
  -- Devolvemos el elemento sin cambios si no es un párrafo que cumple con el patrón
  return el
end

return {
  {Para = ParaActivity},
  {Para = ParaSection},
  {Para = ParaSubsection},
  {Para = ParaSubsubsetion},
  {Para = RemovePrompts},
  {Para = RemoveFilepaths},
  {Para = ExtractFilePath}
}
```
{: file="filter.lua" }

## De documentos Markdown para Notion a documentos PDF

Con Markdown sería mucho más sencillo de generar.

```console
docker run --rm --volume "C:\Users\marco\Documents\GitHub\marcosruiz.github.io\:/data" --volume "C:\Users\marco\Documents\MEGA\CURSO 23 24\Plantillas\Eisvogel:/root/.pandoc/templates" pandoc/extra /data/_posts/2024-03-01-tarea-xsl.md -o /data/pdf/2024-03-01-tarea-xsl.pdf --metadata-file
 /data/pandoc/metadata.yaml --defaults /data/pandoc/defaults.yaml
```

```yaml
listings: true
number-sections: true
template: "eisvogel2"
```
{: file="defaults.yaml" }

```yaml
author: [Marcos Ruiz García]
titlepage: true
toc-own-page: true
toc: true
lang: es-ES
```
{: file="metadata.yaml" }

### Interpretar clases de css

En mi caso, añado las siguientes clases personalizadas:

- `section`
- `subsection`
- `subsubsection`
- `question`

Además por usar el [tema Chirpy](https://chirpy.cotes.page/) el cual usa las siguientes clases:

- `filepath`
- `prompt-tip`
- `prompt-info`
- `prompt-warning`
- `prompt-danger`
- `file` con la información del nombre del fichero.

### Interpretar código HTML

Debo ser capaz de transformar el código HTML a texto.

## Alternativas a Jekyll

Actualmente estoy usando para esta web [Jekyll](https://jekyllrb.com/) con el [tema Chirpy](https://github.com/cotes2020/jekyll-theme-chirpy) pero existen alternativas:

- [MkDocs](https://www.mkdocs.org/) con [Material for MkDocs](https://squidfunk.github.io/mkdocs-material/)
- [VuePress](https://vuepress.vuejs.org/) con [VuePress Theme Hope](https://theme-hope.vuejs.press/)

## DOCX a Markdown

Una de las ventajas que tiene Markdown sobre DOCX es que se puede leer desde cualquier dispositivo cómodamente.

```powershell
docker run --rm --volume "<carpeta donde esta el Docx>\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/<nombre del docx>.docx" `
-o "/data/<nombre del md de salida>.md"
```

Ejemplo de uso:

```powershell
$number="01"
$creator="mruizg"
$title="Representación y comunicación de la información"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="02"
$title="Elementos funcionales de un ordenador digital"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="03"
$title="Componentes, estructura y funcionamiento de la Unidad Central de Proceso"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="04"
$title="Memoria interna. Tipos. Direccionamiento. Características y funciones"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="05"
$title="Microprocesadores. Estructura. Tipos. Comunicación con el exterior"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="06"
$title="Sistemas de almacenamiento externo. Tipos. Características y funcionamiento"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="07"
$title="Dispositivos periféricos de entradasalida. Características y funcionamiento"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="08"
$title="Hardware comercial de un ordenador. Placa base. Tarjetas controladoras de dispositivos y de entradasalida"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="10"
$title="Representación interna de los datos"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="52"
$title="Sistemas en red. Tipos. Componentes y topologías"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="53"
$title="Transmisión de datos. Medios. Tipos. Técnicas. Perturbaciones"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="54"
$title="Arquitectura de sistemas de comunicación. Niveles. Funciones. Servicios"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="55"
$title="Conexión de ordenadores en red. Elementos hardware necesarios. Tipos y características"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="56"
$title="Software de sistemas en red. Componentes. Funciones y estructura"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="57"
$title="Redes de área local. Hardware. Software. Recursos compartidos"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="58"
$title="Redes de área extensa. Interconexión redes locales"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="59"
$title="Análisis e implantación de un sistema en red"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="60"
$title="Instalación y configuración de sistemas en red local"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="61"
$title="Integración de sistemas. Medios de interconexión estándares"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="62"
$title="Evaluación y mejora del rendimiento de sistemas en red"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="63"
$title="Seguridad de los sistemas en red"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="64"
$title="Explotación y administración de sistemas en red"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

$number="65"
$title="Análisis comparativo entre un sistema operativo multiusuario y un sistema en red"
$folder="$number-$title"
$file="$number-$creator-$title"
docker run --rm --volume "C:\Users\marco\MEGA\OPOS\SAI\SAI Temas\00 SAI Temas propios\$folder\:/data" `
pandoc/extra -t markdown_strict --extract-media='./' `
"/data/$file.docx" `
-o "/data/$file.md"

```

## Bibliografía

- <https://github.com/Wandmalfarbe/pandoc-latex-template?tab=readme-ov-file>
- <https://github.com/ryangrose/easy-pandoc-templates>
- <https://pandoc.org/lua-filters.html>
